{"version":3,"file":"indoor.esm.js","sources":["../src/geometry/Point.js","../src/core/Constants.js","../node_modules/rollup-plugin-node-globals/src/global.js","../node_modules/process-es6/browser.js","../src/lib/ev-pos.js","../src/lib/impetus.js","../src/lib/mumath/parse-unit.js","../src/lib/mumath/to-px.js","../src/lib/mouse-wheel.js","../src/lib/mouse-event-offset.js","../src/lib/touch-pinch.js","../src/lib/raf.js","../src/lib/panzoom.js","../src/lib/mumath/clamp.js","../src/lib/mumath/len.js","../src/lib/mumath/lerp.js","../src/lib/mumath/mod.js","../src/lib/mumath/almost.js","../src/lib/mumath/normalize.js","../src/lib/mumath/precision.js","../src/lib/mumath/round.js","../src/lib/mumath/range.js","../src/lib/mumath/order.js","../src/lib/mumath/log10.js","../src/lib/mumath/is-multiple.js","../src/lib/mumath/scale.js","../src/lib/mumath/is-plain-obj.js","../src/lib/mumath/index.js","../src/core/Base.js","../src/lib/color-alpha.js","../src/grid/gridStyle.js","../src/grid/Axis.js","../src/grid/Grid.js","../src/map/ModesMixin.js","../src/lib/mix.js","../src/map/Map.js","../src/layer/Group.js","../src/layer/Layer.js","../src/floorplan/Floor.js","../src/layer/vector/Line.js","../src/layer/Connector.js","../src/layer/marker/Marker.js","../src/layer/marker/Icon.js","../src/layer/vector/Polyline.js","../src/layer/vector/Circle.js","../src/layer/vector/Rect.js","../src/layer/marker/Bbox.js","../src/Indoor.js"],"sourcesContent":["export class Point extends fabric.Point {\n  constructor(...params) {\n    let x;\n    let y;\n    if (params.length > 1) {\n      [x, y] = params;\n    } else if (params.length === 0 || !params[0]) {\n      [x, y] = [0, 0];\n    } else if (Object.prototype.hasOwnProperty.call(params[0], 'x')) {\n      x = params[0].x;\n      y = params[0].y;\n    } else if (params[0].length) {\n      [[x, y]] = params;\n    } else {\n      console.error('Parameter for Point is not valid. Use Point(x,y) or Point({x,y}) or Point([x,y])', params);\n    }\n\n    super(x, y);\n  }\n\n  setX(x) {\n    this.x = x || 0;\n  }\n\n  setY(y) {\n    this.y = y || 0;\n  }\n\n  getArray() {\n    return [this.x, this.y];\n  }\n}\n\nexport const point = (...params) => new Point(...params);\n","import { Point } from '../geometry/Point.js';\n\nexport const Modes = {\n  SELECT: 'SELECT',\n  GRAB: 'GRAB',\n  DRAW: 'DRAW'\n};\n\nexport const MAP = {\n  center: new Point(),\n  zoom: 1,\n  minZoom: 0,\n  maxZoom: 20,\n  gridEnabled: true,\n  zoomEnabled: true,\n  selectEnabled: true,\n  mode: Modes.SELECT\n};\n\nexport const MARKER = {\n  position: new Point(),\n  minZoom: 1,\n  maxZoom: 20\n};\n\nexport const ICON = {\n  url: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAy8SURBVHhe7Z1r1BVVGcdn5n0hQZMyL62VEGmIN4xqhaV2QQwE0cxLSHbRMsH6nvVdQEWgPpUo0kUDQQGt5eqLIaho2jKF1irAoEi8QEtdXApEV/2e2SPC4Zl59z5n5szl7P9af877cp7/s/d+nnln9uzZe0/QQPTDEfC8IAivCYLoh/x8J1zF7+v4fQvcAXfBAwnlZ/k/vhMbsQ0W8jvacLrxFfsU3x4Vw6kk6Wo+F8DVJG0bfDsMov/lSfFpfAePmbLCr5myPbqN95OIi/mcx+dzcJ+WsG5QyjZ1CObzOZnPY6WCHvnjKAI8lc9FfG7TklEFUrd/JXWUulJnj05xJryFgG7WAl5lUucXqfuspA0ebggn8M8KgviWFtw6kTbQyQxW0qaL4qZ5ZCG6jECt0QLZBNK2tbTxK0ljPd5DOAmu1oLWRNJW7iTijmzP42z4gBakXiBtfxCOkUD0GoZAOkjRf7TA9BKJwX+JxWw4VALTA5DOUPSCFoyiKAcafBn+hQo8AX8PH4LLEsrP8n98JzaxbVcPTspbT2wmUofGYjCcqzU+TxLILZTzMJxDQK8Ngj4Zxv0oPAaGcCCIjdiiEa34EF/iM9qilZknKWcelFg1CucQyGe0BndK89caPBAF0Qw+x8IiB2DEN2XEZS2XsrU6dUpi9Sz+PyEFNgDyMCXapTW0XeLvFRwv5lNuqT4QF1MOhlEHbl3juuR6MOBvN7H7uimmvpijNa5dEhBuFcPr8XuccV8pUCepW763s/i91bivF94H79ca5Er+EmQkbSn8gjiuCT4Pl1D3XEYy8SUd1do8WzgBrtUa4kr83Avlul5XyHX81xwI72jtcyF+HocnitMq4yM0tuNbPPyshp+LPTYDn4UdXxqILbeKwfDYYwUxkgpu1CpuS/Qv05u/MfHXQEjbOussot+Eo1OMv+pA/vI3aRW2JT4Wwg/H3pqNk+CdWgxsSaw34+Pk2FsFcDwVWq9V1IZo/03Pflriq4cgU8qinVpMbIh2A06kv1Uq6O2HT2oVtCF66dicFnvqTYyCbXeYib1MYC317qDtWz20MuTpZ9kGQR+8Q4uRDdEuj72UgLYHeejo/SDx4XEQ0U1arGyI+Dbjo2sIp2kVGYg0cn9vXu9tEfcLiJEevyyilfULXcGZVHK3VoksonmDSn458eGRivhx+etaDLOIZg9imWBTKAZR0HNaBbKI5k20MhjiYYdxEjMtlllE8zzaQh8lO3dWqNR+dH5GrDsuJHbOi17QzTfy/PElrcCBGS+h8mgL4dV6TLOJcLzR5wfu96O/aoVlkd7+9xO9R9uIZmqxzSKajQhzHR+YpRWURTSFnYp6EG1ceuNpbLlgtFzHtULSyKlLRqhkgMMjH0TE1GnEVXKG7nQj7wwPaQWkkYK53Qs+ZqQeOYKYut0eovmtkbaNcILmOItc969MxB65I7pCi3kWyWEnYy+upx1ZGu1RMO7SYp9GcvhUonNFdInmMI3Y70B0vNF6FIgPEevXtBykEftLE60Lwqc0Z+kMb0iEHoUj/I6eA53Y/zER2iL8ouYojdjLciuPriJ8XMtFGrF3Ghyy7vlzenkb+08bmUcX8UmJvZYTjdhb3xGMwvEBzYlG7JcYmUcJuE/LiUbJKfajjSwbt2gONOL0Lez9Hjjl4QxyYD1Ih70sQ8+EjPn/QxNrxF5WrHiUi6VabjSS239in/WMILpYE6YRgX/GXz7O1XKTRnI8JdGpWKSJNPqef5UQWs8sxnix0RyJYzg6XtFEOsPrEp1H6Qi/pefoSJLjVxHIBhitCCdqAo04kVE/vy1qdSDb51qPDmKr7lBm/cwZ218YiUeFsFjLlUZs1bkaf9aMNXIEyV64HpVCNEXLlUaMZfLoYfslycpeq/tJ7OT0r11DPMrF0eTG6jKAnYzfHLrCOLpKM9SI8Qqj8aggrDfd5AQg71g4iPmakcYoiGYmGo/KIbpRy5lGjH9iNAaPaUYag6C/KduXNRD9YzgIrLajwXit0cQrdKOXNKNWYidDibIBlEc1MZgcWQ3lY7cd+0EiGs4vVo8Vse10kqFH8bB6lC85x1Z2UA3O0ww0YpvbXHOPwmC9hgNb2c7Ofqk3trXfubL5CKdrudMotgiim7UvNQZBn3/6V3n0Wz8dJPc/FoXVjlUYy772I0XgUWmMkFxpOWwltrIzW7BK+7KVOJVe49Ei8Kg0hpIry7u6+D0J4Trty1biVF62YLPfvke5IEfRBi2HrcRUFo3YvQQBwydj9x51gNWUcck9ttEO7ctWYiivVPGoBx7RcthKcr8TW7uXOWAo1wuPemCllsNWSu6xtVsDgKGfAVwfWM0Ultxj6w+ABsLpAPCXgObB6RLgO4HNg1Mn0N8GNg+2t4FbsbXbBwBjPxBUD7gMBD0tAj8U3Cy4DgU7PQyKJxB4VBouD4Pugv5xcLPQP07LnUZyL4+D/YSQZiG8RsudRmxlQkjf+dqXGjEecIMBj9LhsMFHn0wJc5oUKq9l96g2bDv1ByeF+mnhzYFMC9+q5a6V2B2cFi5wWBgSnGMkHhVEWwtDBNZLwyhgRqLxqBzaXhrmF4c2BC6LQw97k4vL8vDXsPfLw6sHWR7+qpazVmLXujxcELlsEHFJIvKoDKLJWq40YvsCgiOe6/gtYuqNe7RcacRW2yImnKQZa+QI8ptEVQu5bBLltE0cB8y3E51H6Qi/qeVIoxwoCDhgdDicRkJ59btHJRCu0XKkEeOsy7d9R0KI4Fyj8ygR1k//hOQ4swN/FAZ+s+h6YYmWG43kdhv2Q4wsHQ4bDMT3k2cYmUcJOJ0cuGwXb7XBx2k4dXlhxG+MzKME3KvlRCM5lad/1i+SfFhzojFx/Ckj8+gixjr+of7OyKwQOr0p3N8RlAH7LeKF2F+YCG0RPq05SiP2302EHoUjvF7LQRqxfyYRuiCaqjlLI/YywOBfHFk8jpNYazlII/aXJVpX2O0e8i4R3G10HgVioRb7NMqZPNG1g/AizWkWOdquSMQeuSO6XIt5FslhJy+PjmF9RyCkkq+j8a+Pzx8yZ8P19fEuPf9UjKZg68EGIUedLCSNjNwjBxDL8Akt1mlEkusg3WytkCyimWekHjlgrhbjLKK51UjzgTwj+JtWUBbR+HcLdIxohhbbLKLZiDDrBZFtYbxW2EDk1HXYmyk8XBBdqcV0ICJ0HfSxxjytwCzSiP3oCqtQgzGe2O3TYppFdAuMvBgMolLWk0ffJZo30Y4zLjws8Bli9oYWyyyikcmeg42L4nAWBe3RKpBFaZCMKyQ+PFIRTiBWTrd7QjR7EY8xPgqH/RLkQ0kluRz4PkE6oqug82nfsPtL92/TKzIwaeRNiQ+Pg4hmarGyIeK5xkf3sVyrkA3R3gH7Yi+9DYnB7VqMbIj2wdhLSeBe0+2B0aFEvwaOij31Jj4OrVdmt5LYy3bvA87xKxoncPqy2pZMI9qdvdkviK/3Vpt0akQr2/adaHyVj5Op0GatorbEx8/hSbG3ZkOS9jMtBrYk1i/iY3jsrUI4hYpt0ipsS/TbORvckPhrIKRt0Xat7bZMkn+q8Vc9yH5D67WKuxA/f4BNWnQig2CPam11IbGV0/6I2GOFIac4q71qs0hj38HPr2Cd31Us2+n8krZYbcKVRfzII/baXCLlSdQyrSGuJHjyXFvWHlwgjmuC8+F91N1pHkUa8bUclt7bbwdtDxZpJKCPch29Dr8fNO4rBeokK6ajjk/1hxK/txv3tUV4LUHZrTWuXeJPtjhbxOelfA6LiykHx1KHqXxKXTrq3LUSf3vCIPyGKab+4DoePqs1tFMmB8My/H/PlFPoPobim+t6XNb9lG21v6Ir8fsn/I+VApsECZ7zfAJXEry/U45sgz6LRE1PNriWnrNsdW/zvgOxEVs0oo3308VXsEp8a2XmScqR5/lN3owznEggO75VdCHl7YUvwQ1UQJaxPQJXwqUJ5Wf5P74Tm9h2r+arKFIet3jhJOrQExgK59Boq33tm0xisI9YyAROiUnPQe6TV2iB6QXSdjnz1HmcIy9Ekzn9tf1UrG6krWto85Sk8R7vIbqc4HQ8ilhVStto41eTxnqkI17PJr1u6w0QqkraIBtocFcinV8PV5wFZxPEwm+/8qbU2dQ9OFsa4tEZhhBQGfW7h89CBl/yoNSNOi7mU9bj13Lsvg4YRoClA7WAz+dhLg9c2qGUbeoge+/HdSpzWLpnMYrr6zQ+fwqldy2DOFZvzXCh+DS+4zdtUFZcZi/PZ6wsZGWMvAzpApIkD6Ju5md5QaJ0xNbx+xa4A+6CBxLKz/J/W7GRiZYylIwm+pHxET+KHgkLX3XTXQTB/wEErHoK8OgOXgAAAABJRU5ErkJggg==',\n  size: [128, 128],\n  anchor: [64, 64]\n};\n\nfabric.Object.prototype.originX = 'center';\nfabric.Object.prototype.originY = 'center';\n\nfabric.Object.prototype.lockUniScaling = true;\nfabric.Object.prototype.lockScalingFlip = true;\nfabric.Object.prototype.transparentCorners = false;\nfabric.Object.prototype.centeredScaling = true;\nfabric.Object.prototype.cornerStyle = 'circle';\nfabric.Object.prototype.cornerColor = 'blue';\nfabric.Object.prototype.borderColor = 'blue';\nfabric.Object.prototype.borderOpacity = 0.7;\nfabric.Object.prototype.cornerOpacity = 0.7;\nfabric.Object.prototype.cornerStrokeColor = 'blue';\n\nfabric.Object.prototype.borderColor = '#2dcfab';\nfabric.Object.prototype.cornerColor = '#2dcfab';\nfabric.Object.prototype.cornerStrokeColor = '#176957';\n\nfabric.Object.prototype.objectCaching = false;\nfabric.Group.prototype.objectCaching = true;\n\nfabric.Group.prototype.selectionBackgroundColor = 'rgba(45,207,171,0.25)';\n\nfabric.Object.prototype.borderDashArray = [3, 3];\n\nfabric.Object.prototype.padding = 5;\n\n\nfabric.Object.prototype.getBounds = function getBounds() {\n  const coords = [];\n  coords.push(new Point(this.left - this.width / 2.0, this.top - this.height / 2.0));\n  coords.push(new Point(this.left + this.width / 2.0, this.top + this.height / 2.0));\n  return coords;\n};\n","export default (typeof global !== \"undefined\" ? global :\n            typeof self !== \"undefined\" ? self :\n            typeof window !== \"undefined\" ? window : {});\n","// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\nvar cachedSetTimeout = defaultSetTimout;\nvar cachedClearTimeout = defaultClearTimeout;\nif (typeof global.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout;\n}\nif (typeof global.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout;\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\nexport function nextTick(fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nexport var title = 'browser';\nexport var platform = 'browser';\nexport var browser = true;\nexport var env = {};\nexport var argv = [];\nexport var version = ''; // empty string to avoid regexp issues\nexport var versions = {};\nexport var release = {};\nexport var config = {};\n\nfunction noop() {}\n\nexport var on = noop;\nexport var addListener = noop;\nexport var once = noop;\nexport var off = noop;\nexport var removeListener = noop;\nexport var removeAllListeners = noop;\nexport var emit = noop;\n\nexport function binding(name) {\n    throw new Error('process.binding is not supported');\n}\n\nexport function cwd () { return '/' }\nexport function chdir (dir) {\n    throw new Error('process.chdir is not supported');\n};\nexport function umask() { return 0; }\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global.performance || {}\nvar performanceNow =\n  performance.now        ||\n  performance.mozNow     ||\n  performance.msNow      ||\n  performance.oNow       ||\n  performance.webkitNow  ||\n  function(){ return (new Date()).getTime() }\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nexport function hrtime(previousTimestamp){\n  var clocktime = performanceNow.call(performance)*1e-3\n  var seconds = Math.floor(clocktime)\n  var nanoseconds = Math.floor((clocktime%1)*1e9)\n  if (previousTimestamp) {\n    seconds = seconds - previousTimestamp[0]\n    nanoseconds = nanoseconds - previousTimestamp[1]\n    if (nanoseconds<0) {\n      seconds--\n      nanoseconds += 1e9\n    }\n  }\n  return [seconds,nanoseconds]\n}\n\nvar startTime = new Date();\nexport function uptime() {\n  var currentTime = new Date();\n  var dif = currentTime - startTime;\n  return dif / 1000;\n}\n\nexport default {\n  nextTick: nextTick,\n  title: title,\n  browser: browser,\n  env: env,\n  argv: argv,\n  version: version,\n  versions: versions,\n  on: on,\n  addListener: addListener,\n  once: once,\n  off: off,\n  removeListener: removeListener,\n  removeAllListeners: removeAllListeners,\n  emit: emit,\n  binding: binding,\n  cwd: cwd,\n  chdir: chdir,\n  umask: umask,\n  hrtime: hrtime,\n  platform: platform,\n  release: release,\n  config: config,\n  uptime: uptime\n};\n","const isNum = function (val) {\n    return typeof val === 'number' && !isNaN(val);\n};\n\nexport default (ev, toElement) => {\n    toElement = toElement || ev.currentTarget;\n\n    const toElementBoundingRect = toElement.getBoundingClientRect();\n        const orgEv = ev.originalEvent || ev;\n        const hasTouches = ev.touches && ev.touches.length;\n        let pageX = 0;\n        let pageY = 0;\n\n    if (hasTouches) {\n        if (isNum(ev.touches[0].pageX) && isNum(ev.touches[0].pageY)) {\n            pageX = ev.touches[0].pageX;\n            pageY = ev.touches[0].pageY;\n        } else if (isNum(ev.touches[0].clientX) && isNum(ev.touches[0].clientY)) {\n            pageX = orgEv.touches[0].clientX;\n            pageY = orgEv.touches[0].clientY;\n        }\n    } else if (isNum(ev.pageX) && isNum(ev.pageY)) {\n            pageX = ev.pageX;\n            pageY = ev.pageY;\n        } else if (ev.currentPoint && isNum(ev.currentPoint.x) && isNum(ev.currentPoint.y)) {\n            pageX = ev.currentPoint.x;\n            pageY = ev.currentPoint.y;\n        }\n\n    return {\n        x: pageX - toElementBoundingRect.left,\n        y: pageY - toElementBoundingRect.top\n    };\n};","const stopThresholdDefault = 0.3;\nconst bounceDeceleration = 0.04;\nconst bounceAcceleration = 0.11;\n\n\n// fixes weird safari 10 bug where preventDefault is prevented\n// @see https://github.com/metafizzy/flickity/issues/457#issuecomment-254501356\nwindow.addEventListener('touchmove', function() {});\n\nexport default class Impetus {\n    constructor({\n        source: sourceEl = document,\n        update: updateCallback,\n        multiplier = 1,\n        friction = 0.92,\n        initialValues,\n        boundX,\n        boundY,\n        bounce = true\n    }) {\n        var boundXmin, boundXmax, boundYmin, boundYmax, pointerLastX, pointerLastY, pointerCurrentX, pointerCurrentY, pointerId, decVelX, decVelY;\n        var targetX = 0;\n        var targetY = 0;\n        var stopThreshold = stopThresholdDefault * multiplier;\n        var ticking = false;\n        var pointerActive = false;\n        var paused = false;\n        var decelerating = false;\n        var trackingPoints = [];\n\n\n        /**\n         * Initialize instance\n         */\n        (function init() {\n            sourceEl = (typeof sourceEl === 'string') ? document.querySelector(sourceEl) : sourceEl;\n            if (!sourceEl) {\n                throw new Error('IMPETUS: source not found.');\n            }\n\n            if (!updateCallback) {\n                throw new Error('IMPETUS: update function not defined.');\n            }\n\n            if (initialValues) {\n                if (initialValues[0]) {\n                    targetX = initialValues[0];\n                }\n                if (initialValues[1]) {\n                    targetY = initialValues[1];\n                }\n                callUpdateCallback();\n            }\n\n            // Initialize bound values\n            if (boundX) {\n                boundXmin = boundX[0];\n                boundXmax = boundX[1];\n            }\n            if (boundY) {\n                boundYmin = boundY[0];\n                boundYmax = boundY[1];\n            }\n\n            sourceEl.addEventListener('touchstart', onDown);\n            sourceEl.addEventListener('mousedown', onDown);\n        })();\n\n        /**\n         * In edge cases where you may need to\n         * reinstanciate Impetus on the same sourceEl\n         * this will remove the previous event listeners\n         */\n        this.destroy = function() {\n            sourceEl.removeEventListener('touchstart', onDown);\n            sourceEl.removeEventListener('mousedown', onDown);\n\n            cleanUpRuntimeEvents();\n\n            // however it won't \"destroy\" a reference\n            // to instance if you'd like to do that\n            // it returns null as a convinience.\n            // ex: `instance = instance.destroy();`\n            return null;\n        };\n\n        /**\n         * Disable movement processing\n         * @public\n         */\n        this.pause = function() {\n            cleanUpRuntimeEvents();\n\n            pointerActive = false;\n            paused = true;\n        };\n\n        /**\n         * Enable movement processing\n         * @public\n         */\n        this.resume = function() {\n            paused = false;\n        };\n\n        /**\n         * Update the current x and y values\n         * @public\n         * @param {Number} x\n         * @param {Number} y\n         */\n        this.setValues = function(x, y) {\n            if (typeof x === 'number') {\n                targetX = x;\n            }\n            if (typeof y === 'number') {\n                targetY = y;\n            }\n        };\n\n        /**\n         * Update the multiplier value\n         * @public\n         * @param {Number} val\n         */\n        this.setMultiplier = function(val) {\n            multiplier = val;\n            stopThreshold = stopThresholdDefault * multiplier;\n        };\n\n        /**\n         * Update boundX value\n         * @public\n         * @param {Number[]} boundX\n         */\n        this.setBoundX = function(boundX) {\n            boundXmin = boundX[0];\n            boundXmax = boundX[1];\n        };\n\n        /**\n         * Update boundY value\n         * @public\n         * @param {Number[]} boundY\n         */\n        this.setBoundY = function(boundY) {\n            boundYmin = boundY[0];\n            boundYmax = boundY[1];\n        };\n\n        /**\n         * Removes all events set by this instance during runtime\n         */\n        function cleanUpRuntimeEvents() {\n          // Remove all touch events added during 'onDown' as well.\n          document.removeEventListener('touchmove', onMove, getPassiveSupported() ? { passive: false } : false);\n          document.removeEventListener('touchend', onUp);\n          document.removeEventListener('touchcancel', stopTracking);\n          document.removeEventListener('mousemove', onMove, getPassiveSupported() ? { passive: false } : false);\n          document.removeEventListener('mouseup', onUp);\n        }\n\n        /**\n         * Add all required runtime events\n         */\n        function addRuntimeEvents() {\n          cleanUpRuntimeEvents();\n\n          // @see https://developers.google.com/web/updates/2017/01/scrolling-intervention\n          document.addEventListener('touchmove', onMove, getPassiveSupported() ? { passive: false } : false);\n          document.addEventListener('touchend', onUp);\n          document.addEventListener('touchcancel', stopTracking);\n          document.addEventListener('mousemove', onMove, getPassiveSupported() ? { passive: false } : false);\n          document.addEventListener('mouseup', onUp);\n        }\n\n        /**\n         * Executes the update function\n         */\n        function callUpdateCallback() {\n            updateCallback.call(sourceEl, targetX, targetY);\n        }\n\n        /**\n         * Creates a custom normalized event object from touch and mouse events\n         * @param  {Event} ev\n         * @returns {Object} with x, y, and id properties\n         */\n        function normalizeEvent(ev) {\n            if (ev.type === 'touchmove' || ev.type === 'touchstart' || ev.type === 'touchend') {\n                var touch = ev.targetTouches[0] || ev.changedTouches[0];\n                return {\n                    x: touch.clientX,\n                    y: touch.clientY,\n                    id: touch.identifier\n                };\n            } else { // mouse events\n                return {\n                    x: ev.clientX,\n                    y: ev.clientY,\n                    id: null\n                };\n            }\n        }\n\n        /**\n         * Initializes movement tracking\n         * @param  {Object} ev Normalized event\n         */\n        function onDown(ev) {\n            var event = normalizeEvent(ev);\n            if (!pointerActive && !paused) {\n                pointerActive = true;\n                decelerating = false;\n                pointerId = event.id;\n\n                pointerLastX = pointerCurrentX = event.x;\n                pointerLastY = pointerCurrentY = event.y;\n                trackingPoints = [];\n                addTrackingPoint(pointerLastX, pointerLastY);\n\n                addRuntimeEvents();\n            }\n        }\n\n        /**\n         * Handles move events\n         * @param  {Object} ev Normalized event\n         */\n        function onMove(ev) {\n            ev.preventDefault();\n            var event = normalizeEvent(ev);\n\n            if (pointerActive && event.id === pointerId) {\n                pointerCurrentX = event.x;\n                pointerCurrentY = event.y;\n                addTrackingPoint(pointerLastX, pointerLastY);\n                requestTick();\n            }\n        }\n\n        /**\n         * Handles up/end events\n         * @param {Object} ev Normalized event\n         */\n        function onUp(ev) {\n            var event = normalizeEvent(ev);\n\n            if (pointerActive && event.id === pointerId) {\n                stopTracking();\n            }\n        }\n\n        /**\n         * Stops movement tracking, starts animation\n         */\n        function stopTracking() {\n            pointerActive = false;\n            addTrackingPoint(pointerLastX, pointerLastY);\n            startDecelAnim();\n\n            cleanUpRuntimeEvents();\n        }\n\n        /**\n         * Records movement for the last 100ms\n         * @param {number} x\n         * @param {number} y [description]\n         */\n        function addTrackingPoint(x, y) {\n            var time = Date.now();\n            while (trackingPoints.length > 0) {\n                if (time - trackingPoints[0].time <= 100) {\n                    break;\n                }\n                trackingPoints.shift();\n            }\n\n            trackingPoints.push({x, y, time});\n        }\n\n        /**\n         * Calculate new values, call update function\n         */\n        function updateAndRender() {\n            var pointerChangeX = pointerCurrentX - pointerLastX;\n            var pointerChangeY = pointerCurrentY - pointerLastY;\n\n            targetX += pointerChangeX * multiplier;\n            targetY += pointerChangeY * multiplier;\n\n            if (bounce) {\n                let diff = checkBounds();\n                if (diff.x !== 0) {\n                    targetX -= pointerChangeX * dragOutOfBoundsMultiplier(diff.x) * multiplier;\n                }\n                if (diff.y !== 0) {\n                    targetY -= pointerChangeY * dragOutOfBoundsMultiplier(diff.y) * multiplier;\n                }\n            } else {\n                checkBounds(true);\n            }\n\n            callUpdateCallback();\n\n            pointerLastX = pointerCurrentX;\n            pointerLastY = pointerCurrentY;\n            ticking = false;\n        }\n\n\n        /**\n         * Returns a value from around 0.5 to 1, based on distance\n         * @param {Number} val\n         */\n        function dragOutOfBoundsMultiplier(val) {\n            return 0.000005 * Math.pow(val, 2) + 0.0001 * val + 0.55;\n        }\n\n\n        /**\n         * prevents animating faster than current framerate\n         */\n        function requestTick() {\n            if (!ticking) {\n                requestAnimFrame(updateAndRender);\n            }\n            ticking = true;\n        }\n\n\n        /**\n         * Determine position relative to bounds\n         * @param {Boolean} restrict Whether to restrict target to bounds\n         */\n        function checkBounds(restrict) {\n            var xDiff = 0;\n            var yDiff = 0;\n\n            if (boundXmin !== undefined && targetX < boundXmin) {\n                xDiff = boundXmin - targetX;\n            } else if (boundXmax !== undefined && targetX > boundXmax) {\n                xDiff = boundXmax - targetX;\n            }\n\n            if (boundYmin !== undefined && targetY < boundYmin) {\n                yDiff = boundYmin - targetY;\n            } else if (boundYmax !== undefined && targetY > boundYmax) {\n                yDiff = boundYmax - targetY;\n            }\n\n            if (restrict) {\n                if (xDiff !== 0) {\n                    targetX = (xDiff > 0) ? boundXmin : boundXmax;\n                }\n                if (yDiff !== 0) {\n                    targetY = (yDiff > 0) ? boundYmin : boundYmax;\n                }\n            }\n\n            return {\n                x: xDiff,\n                y: yDiff,\n                inBounds: xDiff === 0 && yDiff === 0\n            };\n        }\n\n\n        /**\n         * Initialize animation of values coming to a stop\n         */\n        function startDecelAnim() {\n            var firstPoint = trackingPoints[0];\n            var lastPoint = trackingPoints[trackingPoints.length - 1];\n\n            var xOffset = lastPoint.x - firstPoint.x;\n            var yOffset = lastPoint.y - firstPoint.y;\n            var timeOffset = lastPoint.time - firstPoint.time;\n\n            var D = (timeOffset / 15) / multiplier;\n\n            decVelX = (xOffset / D) || 0; // prevent NaN\n            decVelY = (yOffset / D) || 0;\n\n            var diff = checkBounds();\n\n            if ((Math.abs(decVelX) > 1 || Math.abs(decVelY) > 1) || !diff.inBounds){\n                decelerating = true;\n                requestAnimFrame(stepDecelAnim);\n            }\n        }\n\n\n        /**\n         * Animates values slowing down\n         */\n        function stepDecelAnim() {\n            if (!decelerating) {\n                return;\n            }\n\n            decVelX *= friction;\n            decVelY *= friction;\n\n            targetX += decVelX;\n            targetY += decVelY;\n\n            var diff = checkBounds();\n\n            if ((Math.abs(decVelX) > stopThreshold || Math.abs(decVelY) > stopThreshold) || !diff.inBounds) {\n\n                if (bounce) {\n                    let reboundAdjust = 2.5;\n\n                    if (diff.x !== 0) {\n                        if (diff.x * decVelX <= 0) {\n                            decVelX += diff.x * bounceDeceleration;\n                        } else {\n                            let adjust = (diff.x > 0) ? reboundAdjust : -reboundAdjust;\n                            decVelX = (diff.x + adjust) * bounceAcceleration;\n                        }\n                    }\n                    if (diff.y !== 0) {\n                        if (diff.y * decVelY <= 0) {\n                            decVelY += diff.y * bounceDeceleration;\n                        } else {\n                            let adjust = (diff.y > 0) ? reboundAdjust : -reboundAdjust;\n                            decVelY = (diff.y + adjust) * bounceAcceleration;\n                        }\n                    }\n                } else {\n                    if (diff.x !== 0) {\n                        if (diff.x > 0) {\n                            targetX = boundXmin;\n                        } else {\n                            targetX = boundXmax;\n                        }\n                        decVelX = 0;\n                    }\n                    if (diff.y !== 0) {\n                        if (diff.y > 0) {\n                            targetY = boundYmin;\n                        } else {\n                            targetY = boundYmax;\n                        }\n                        decVelY = 0;\n                    }\n                }\n\n                callUpdateCallback();\n\n                requestAnimFrame(stepDecelAnim);\n            } else {\n                decelerating = false;\n            }\n        }\n    }\n}\n\n\n\n/**\n * @see http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\n */\nconst requestAnimFrame = (function(){\n    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function(callback) {\n        window.setTimeout(callback, 1000 / 60);\n    };\n})();\n\n\nfunction getPassiveSupported() {\n    let passiveSupported = false;\n\n    try {\n        var options = Object.defineProperty({}, \"passive\", {\n            get: function() {\n                passiveSupported = true;\n            }\n        });\n\n        window.addEventListener(\"test\", null, options);\n    } catch(err) {}\n\n    getPassiveSupported = () => passiveSupported;\n    return passiveSupported;\n}","export default (str, out) => {\n  if (!out)\n      out = [ 0, '' ]\n\n  str = String(str)\n  var num = parseFloat(str, 10)\n  out[0] = num\n  out[1] = str.match(/[\\d.\\-\\+]*\\s*(.*)/)[1] || ''\n  return out\n}","// (c) 2015 Mikola Lysenko. MIT License\n// https://github.com/mikolalysenko/to-px\n\nimport parseUnit from './parse-unit';\n\nvar PIXELS_PER_INCH = 96\n\nvar defaults = {\n  'ch': 8,\n  'ex': 7.15625,\n  'em': 16,\n  'rem': 16,\n  'in': PIXELS_PER_INCH,\n  'cm': PIXELS_PER_INCH / 2.54,\n  'mm': PIXELS_PER_INCH / 25.4,\n  'pt': PIXELS_PER_INCH / 72,\n  'pc': PIXELS_PER_INCH / 6,\n  'px': 1\n}\n\nexport default function toPX(str) {\n  if (!str) return null\n\n  if (defaults[str]) return defaults[str]\n\n  // detect number of units\n  var parts = parseUnit(str)\n  if (!isNaN(parts[0]) && parts[1]) {\n    var px = toPX(parts[1])\n    return typeof px === 'number' ? parts[0] * px : null;\n  }\n\n  return null;\n}","\nimport toPX from './mumath/to-px';\n\nexport default mouseWheelListen\n\nfunction mouseWheelListen(element, callback, noScroll) {\n  if(typeof element === 'function') {\n    noScroll = !!callback\n    callback = element\n    element = window\n  }\n  var lineHeight = toPX('ex', element)\n  var listener = function(ev) {\n    if(noScroll) {\n      ev.preventDefault()\n    }\n    var dx = ev.deltaX || 0\n    var dy = ev.deltaY || 0\n    var dz = ev.deltaZ || 0\n    var mode = ev.deltaMode\n    var scale = 1\n    switch(mode) {\n      case 1:\n        scale = lineHeight\n      break\n      case 2:\n        scale = window.innerHeight\n      break\n    }\n    dx *= scale\n    dy *= scale\n    dz *= scale\n    if(dx || dy || dz) {\n      return callback(dx, dy, dz, ev)\n    }\n  }\n  element.addEventListener('wheel', listener)\n  return listener\n}","var rootPosition = { left: 0, top: 0 }\n\nexport default mouseEventOffset\nfunction mouseEventOffset (ev, target, out) {\n  target = target || ev.currentTarget || ev.srcElement\n  if (!Array.isArray(out)) {\n    out = [ 0, 0 ]\n  }\n  var cx = ev.clientX || 0\n  var cy = ev.clientY || 0\n  var rect = getBoundingClientOffset(target)\n  out[0] = cx - rect.left\n  out[1] = cy - rect.top\n  return out\n}\n\nfunction getBoundingClientOffset (element) {\n  if (element === window ||\n      element === document ||\n      element === document.body) {\n    return rootPosition\n  } else {\n    return element.getBoundingClientRect()\n  }\n}\n","import EventEmitter2 from 'eventemitter2';\nimport eventOffset from './mouse-event-offset';\n\nfunction distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1]\n  return Math.sqrt(x*x + y*y)\n}\n\nexport default touchPinch;\nfunction touchPinch (target) {\n  target = target || window\n\n  var emitter = new EventEmitter2()\n  var fingers = [ null, null ]\n  var activeCount = 0\n\n  var lastDistance = 0\n  var ended = false\n  var enabled = false\n\n  // some read-only values\n  Object.defineProperties(emitter, {\n    pinching(){\n      return activeCount === 2\n    },\n\n    fingers() {\n      return fingers\n    }\n  })\n\n  enable()\n  emitter.enable = enable\n  emitter.disable = disable\n  emitter.indexOfTouch = indexOfTouch\n  return emitter\n\n  function indexOfTouch (touch) {\n    var id = touch.identifier\n    for (var i = 0; i < fingers.length; i++) {\n      if (fingers[i] &&\n        fingers[i].touch &&\n        fingers[i].touch.identifier === id) {\n        return i\n      }\n    }\n    return -1\n  }\n\n  function enable () {\n    if (enabled) return\n    enabled = true\n    target.addEventListener('touchstart', onTouchStart, false)\n    target.addEventListener('touchmove', onTouchMove, false)\n    target.addEventListener('touchend', onTouchRemoved, false)\n    target.addEventListener('touchcancel', onTouchRemoved, false)\n  }\n\n  function disable () {\n    if (!enabled) return\n    enabled = false\n    activeCount = 0\n    fingers[0] = null\n    fingers[1] = null\n    lastDistance = 0\n    ended = false\n    target.removeEventListener('touchstart', onTouchStart, false)\n    target.removeEventListener('touchmove', onTouchMove, false)\n    target.removeEventListener('touchend', onTouchRemoved, false)\n    target.removeEventListener('touchcancel', onTouchRemoved, false)\n  }\n\n  function onTouchStart (ev) {\n    for (var i = 0; i < ev.changedTouches.length; i++) {\n      var newTouch = ev.changedTouches[i]\n      var id = newTouch.identifier\n      var idx = indexOfTouch(id)\n\n      if (idx === -1 && activeCount < 2) {\n        var first = activeCount === 0\n\n        // newest and previous finger (previous may be undefined)\n        var newIndex = fingers[0] ? 1 : 0\n        var oldIndex = fingers[0] ? 0 : 1\n        var newFinger = new Finger()\n\n        // add to stack\n        fingers[newIndex] = newFinger\n        activeCount++\n\n        // update touch event & position\n        newFinger.touch = newTouch\n        eventOffset(newTouch, target, newFinger.position)\n\n        var oldTouch = fingers[oldIndex] ? fingers[oldIndex].touch : undefined\n        emitter.emit('place', newTouch, oldTouch)\n\n        if (!first) {\n          var initialDistance = computeDistance()\n          ended = false\n          emitter.emit('start', initialDistance)\n          lastDistance = initialDistance\n        }\n      }\n    }\n  }\n\n  function onTouchMove (ev) {\n    var changed = false\n    for (var i = 0; i < ev.changedTouches.length; i++) {\n      var movedTouch = ev.changedTouches[i]\n      var idx = indexOfTouch(movedTouch)\n      if (idx !== -1) {\n        changed = true\n        fingers[idx].touch = movedTouch // avoid caching touches\n        eventOffset(movedTouch, target, fingers[idx].position)\n      }\n    }\n\n    if (activeCount === 2 && changed) {\n      var currentDistance = computeDistance()\n      emitter.emit('change', currentDistance, lastDistance)\n      lastDistance = currentDistance\n    }\n  }\n\n  function onTouchRemoved (ev) {\n    for (var i = 0; i < ev.changedTouches.length; i++) {\n      var removed = ev.changedTouches[i]\n      var idx = indexOfTouch(removed)\n\n      if (idx !== -1) {\n        fingers[idx] = null\n        activeCount--\n        var otherIdx = idx === 0 ? 1 : 0\n        var otherTouch = fingers[otherIdx] ? fingers[otherIdx].touch : undefined\n        emitter.emit('lift', removed, otherTouch)\n      }\n    }\n\n    if (!ended && activeCount !== 2) {\n      ended = true\n      emitter.emit('end')\n    }\n  }\n\n  function computeDistance () {\n    if (activeCount < 2) return 0\n    return distance(fingers[0].position, fingers[1].position)\n  }\n}\n\nfunction Finger () {\n  this.position = [0, 0]\n  this.touch = null\n}\n","function getPrefixed(name) {\n\treturn window['webkit' + name] || window['moz' + name] || window['ms' + name];\n}\n\nvar lastTime = 0;\n\n// fallback for IE 7-8\nfunction timeoutDefer(fn) {\n\tvar time = +new Date(),\n\t    timeToCall = Math.max(0, 16 - (time - lastTime));\n\n\tlastTime = time + timeToCall;\n\treturn window.setTimeout(fn, timeToCall);\n}\n\nexport function bind(fn, obj) {\n\tvar slice = Array.prototype.slice;\n\n\tif (fn.bind) {\n\t\treturn fn.bind.apply(fn, slice.call(arguments, 1));\n\t}\n\n\tvar args = slice.call(arguments, 2);\n\n\treturn function () {\n\t\treturn fn.apply(obj, args.length ? args.concat(slice.call(arguments)) : arguments);\n\t};\n}\n\nexport var requestFn = window.requestAnimationFrame || getPrefixed('RequestAnimationFrame') || timeoutDefer;\nexport var cancelFn = window.cancelAnimationFrame || getPrefixed('CancelAnimationFrame') ||\n\t\tgetPrefixed('CancelRequestAnimationFrame') || function (id) { window.clearTimeout(id); };\n\nconst raf = (fn, context, immediate) =>{\n\tif (immediate && requestFn === timeoutDefer) {\n\t\tfn.call(context);\n\t} else {\n\t\treturn requestFn.call(window, bind(fn, context));\n\t}\n} \n\nraf.cancel = (id) => {\n\tif (id) {\n\t\tcancelFn.call(window, id);\n\t}\n}\n\nexport default raf;","import evPos from './ev-pos';\nimport Impetus from './impetus';\nimport wheel  from './mouse-wheel';\nimport touchPinch  from './touch-pinch';\nimport raf from './raf';\n\nconst panzoom = (target, cb) =>  {\n\tif (target instanceof Function) {\n\t\tcb = target\n\t\ttarget = document.documentElement || document.body\n\t}\n\n\tif (typeof target === 'string') target = document.querySelector(target)\n\n\tlet cursor = {\n\t\tx:0,\n\t\ty:0\n\t}\n\n\tconst hasPassive = () => {\n\t\tlet supported = false\n\n\t\ttry {\n\t\t\tconst opts = Object.defineProperty({}, 'passive', {\n\t\t\t\tget() {\n\t\t\t\t\tsupported = true;\n\t\t\t\t}\n\t\t\t}); \n\n\t\t\twindow.addEventListener('test', null, opts);\n\t\t\twindow.removeEventListener('test', null, opts);\n\t\t} catch(e) {\n\t\t\tsupported = false;\n\t\t}\n\n\t\treturn supported;\n\t}\n\n\tlet impetus;\n\n\tlet initX = 0; let initY = 0; let init = true\n\tconst initFn = function (e) { init = true }\n\ttarget.addEventListener('mousedown', initFn)\n\ttarget.addEventListener('mousemove', (e)=> {\n\t\tcursor = evPos(e);\n\t});\n\ttarget.addEventListener('wheel', (e)=> {\n\t\t\n\t\tif(e) {\n\t\t\tcursor = evPos(e);\n\t\t}\n\t});\n\ttarget.addEventListener('touchstart', initFn, hasPassive() ? { passive: true } : false)\n\n\tlet lastY = 0; let lastX = 0\n\timpetus = new Impetus({\n\t\tsource: target,\n\t\tupdate (x, y) {\n\t\t\tif (init) {\n\t\t\t\tinit = false\n\t\t\t\tinitX = cursor.x\n\t\t\t\tinitY = cursor.y\n\t\t\t}\n\n\t\t\tconst e = {\n\t\t\t\ttarget,\n\t\t\t\ttype: 'mouse',\n\t\t\t\tdx: x - lastX, dy: y - lastY, dz: 0,\n\t\t\t\tx: cursor.x,\n\t\t\t\ty: cursor.y,\n\t\t\t\tx0: initX, y0: initY\n\t\t\t}\n\n\t\t\tlastX = x\n\t\t\tlastY = y\n\n\t\t\tschedule(e)\n\t\t},\n\t\tmultiplier: 1,\n\t\tfriction: .75\n\t})\n\n\t// enable zooming\n\tconst wheelListener = wheel(target, function (dx, dy, dz, e) {\n\t\te.preventDefault();\n\t\tschedule({\n\t\t\ttarget,\n\t\t\ttype: 'mouse',\n\t\t\tdx: 0, dy: 0, dz: dy,\n\t\t\tx: cursor.x,\n\t\t\ty: cursor.y,\n\t\t\tx0: cursor.x,\n\t\t\ty0: cursor.y\n\t\t})\n\t})\n\n\t// mobile pinch zoom\n\tconst pinch = touchPinch(target)\n\tconst mult = 2\n\tlet initialCoords\n\n\tpinch.on('start', function (curr) {\n\t\tconst f1 = pinch.fingers[0];\n\t\tconst f2 = pinch.fingers[1];\n\n\t\tinitialCoords = [\n\t\t\tf2.position[0] * .5 + f1.position[0] * .5,\n\t\t\tf2.position[1] * .5 + f1.position[1] * .5\n\t\t]\n\n\t\timpetus && impetus.pause()\n\t})\n\tpinch.on('end', function () {\n\t\tif (!initialCoords) return\n\n\t\tinitialCoords = null\n\n\t\timpetus && impetus.resume()\n\t})\n\tpinch.on('change', function (curr, prev) {\n\t\tif (!pinch.pinching || !initialCoords) return\n\n\t\tschedule({\n\t\t\ttarget,\n\t\t\ttype: 'touch',\n\t\t\tdx: 0, dy: 0, dz: - (curr - prev) * mult,\n\t\t\tx: initialCoords[0], y: initialCoords[1],\n\t\t\tx0: initialCoords[0], y0: initialCoords[0]\n\t\t})\n\t})\n\n\n\t// schedule function to current or next frame\n\tlet planned; let frameId\n\tfunction schedule (ev) {\n\t\tif (frameId != null) {\n\t\t\tif (!planned) planned = ev\n\t\t\telse {\n\t\t\t\tplanned.dx += ev.dx\n\t\t\t\tplanned.dy += ev.dy\n\t\t\t\tplanned.dz += ev.dz\n\n\t\t\t\tplanned.x = ev.x\n\t\t\t\tplanned.y = ev.y\n\t\t\t}\n\n\t\t\treturn\n\t\t}\n\n\t\t// Firefox sometimes does not clear webgl current drawing buffer\n\t\t// so we have to schedule callback to the next frame, not the current\n\t\t// cb(ev)\n\n\t\tframeId = raf(function () {\n\t\t\tcb(ev)\n\t\t\tframeId = null\n\t\t\tif (planned) {\n\t\t\t\tconst arg = planned\n\t\t\t\tplanned = null\n\t\t\t\tschedule(arg)\n\t\t\t}\n\t\t})\n\t}\n\n\treturn function unpanzoom () {\n\n\t\ttarget.removeEventListener('mousedown', initFn)\n\t\ttarget.removeEventListener('wheel')\n\t\ttarget.removeEventListener('touchstart', initFn)\n\n\t\timpetus.destroy()\n\n\t\ttarget.removeEventListener('wheel', wheelListener)\n\n\t\tpinch.disable()\n\n\t\traf.cancel(frameId)\n\t}\n}\n\nexport default panzoom;","/**\n * Clamp value.\n * Detects proper clamp min/max.\n *\n * @param {number} a Current value to cut off\n * @param {number} min One side limit\n * @param {number} max Other side limit\n *\n * @return {number} Clamped value\n */\n\nfunction clamp(a, min, max) {\n\treturn max > min ? Math.max(Math.min(a,max),min) : Math.max(Math.min(a,min),max);\n};\n\nexport default clamp;\n","/**\n * Return quadratic length\n *\n * @module  mumath/len\n *\n */\n\nexport default function len(a, b) {\n\treturn Math.sqrt(a*a + b*b);\n};\n","/**\n * @module mumath/lerp\n */\n'use strict';\nexport default function (x, y, a) {\n\treturn x * (1.0 - a) + y * a;\n};\n","/**\n * Looping function for any framesize.\n * Like fmod.\n *\n * @module  mumath/loop\n *\n */\n\nexport default function (value, left, right) {\n\t//detect single-arg case, like mod-loop or fmod\n\tif (right === undefined) {\n\t\tright = left;\n\t\tleft = 0;\n\t}\n\n\t//swap frame order\n\tif (left > right) {\n\t\tvar tmp = right;\n\t\tright = left;\n\t\tleft = tmp;\n\t}\n\n\tvar frame = right - left;\n\n\tvalue = ((value + left) % frame) - left;\n\tif (value < left) value += frame;\n\tif (value > right) value -= frame;\n\n\treturn value;\n};\n","\n// Type definitions for almost-equal 1.1\n// Project: https://github.com/mikolalysenko/almost-equal#readme\n// Definitions by: Curtis Maddalozzo <https://github.com/cmaddalozzo>\n// Definitions: https://github.com/DefinitelyTyped/DefinitelyTyped\n\nvar abs = Math.abs;\nvar min = Math.min;\n\nfunction almostEqual(a, b, absoluteError, relativeError) {\n  var d = abs(a - b)\n  \n  if (absoluteError == null) absoluteError = almostEqual.DBL_EPSILON;\n  if (relativeError == null) relativeError = absoluteError;\n  \n  if(d <= absoluteError) {\n    return true\n  }\n  if(d <= relativeError * min(abs(a), abs(b))) {\n    return true\n  }\n  return a === b\n}\n\nexport const FLT_EPSILON = 1.19209290e-7\nexport const DBL_EPSILON = 2.2204460492503131e-16\n\nalmostEqual.FLT_EPSILON = FLT_EPSILON;\nalmostEqual.DBL_EPSILON = DBL_EPSILON;\n\nexport default almostEqual;","/**\n * Get rid of float remainder\n *\n * @module mumath/normalize\n */\n'use strict';\n\nimport { FLT_EPSILON } from './almost';\n\nexport default function(value, eps) {\n\t//ignore ints\n\tvar rem = value%1;\n\tif (!rem) return value;\n\n\tif (eps == null) eps = Number.EPSILON || FLT_EPSILON;\n\n\t//pick number’s neighbour, which is way shorter, like 0.4999999999999998 → 0.5\n\t//O(20)\n\tvar range = 5;\n\tvar len = (rem+'').length;\n\n\tfor (var i = 1; i < range; i+=.5) {\n\t\tvar left = rem - eps*i,\n\t\t\tright = rem + eps*i;\n\n\t\tvar leftStr = left+'', rightStr = right + '';\n\n\t\tif (len - leftStr.length > 2) return value - eps*i;\n\t\tif (len - rightStr.length > 2) return value + eps*i;\n\n\t\t// if (leftStr[2] != rightStr[2])\n\t}\n\n\treturn value;\n};\n","/**\n * @module  mumath/precision\n *\n * Get precision from float:\n *\n * @example\n * 1.1 → 1, 1234 → 0, .1234 → 4\n *\n * @param {number} n\n *\n * @return {number} decimap places\n */\n'use strict';\n\nimport almost from './almost';\nimport norm from './normalize';\n\nexport default function (n, eps) {\n\tn = norm(n);\n\n\tvar str = n + '';\n\n\t//1e-10 etc\n\tvar e = str.indexOf('e-');\n\tif (e >= 0) return parseInt(str.substring(e+2));\n\n\t//imperfect ints, like 3.0000000000000004 or 1.9999999999999998\n\tvar remainder = Math.abs(n % 1);\n\tvar remStr = remainder + '';\n\n\tif (almost(remainder, 1, eps) || almost(remainder, 0, eps)) return 0;\n\n\t//usual floats like .0123\n\tvar d = remStr.indexOf('.') + 1;\n\n\tif (d) return remStr.length - d;\n\n\t//regular inte\n\treturn 0;\n};\n","/**\n * Precision round\n *\n * @param {number} value\n * @param {number} step Minimal discrete to round\n *\n * @return {number}\n *\n * @example\n * toPrecision(213.34, 1) == 213\n * toPrecision(213.34, .1) == 213.3\n * toPrecision(213.34, 10) == 210\n */\n'use strict';\nimport precision from './precision';\n\nexport default function(value, step) {\n\tif (step === 0) return value;\n\tif (!step) return Math.round(value);\n\tvalue = Math.round(value / step) * step;\n\treturn parseFloat(value.toFixed(precision(step)));\n};\n","// The MIT License (MIT)\n\n// Copyright (c) 2016 angus croll\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n\n/*\n  range(0, 5); // [0, 1, 2, 3, 4]\n  range(5); // [0, 1, 2, 3, 4]\n  range(-5); // [0, -1, -2, -3, -4]\n  range(0, 20, 5) // [0, 5, 10, 15]\n  range(0, -20, -5) // [0, -5, -10, -15]\n*/\n\nexport default function range(start, stop, step) {\n  if (start != null && typeof start != 'number') {\n    throw new Error('start must be a number or null');\n  }\n  if (stop != null && typeof stop != 'number') {\n    throw new Error('stop must be a number or null');\n  }\n  if (step != null && typeof step != 'number') {\n    throw new Error('step must be a number or null');\n  }\n  if (stop == null) {\n    stop = start || 0;\n    start = 0;\n  }\n  if (step == null) {\n    step = stop > start ? 1 : -1;\n  }\n  var toReturn = [];\n  var increasing = start < stop; //← here’s the change\n  for (; increasing ? start < stop : start > stop; start += step) {\n    toReturn.push(start);\n  }\n  return toReturn;\n}","/**\n * @module mumath/order\n */\nexport default function (n) {\n\tn = Math.abs(n);\n\tvar order = Math.floor(Math.log(n) / Math.LN10 + 0.000000001);\n\treturn Math.pow(10,order);\n};\n","/**\n * Base 10 logarithm\n *\n * @module mumath/log10\n */\n'use strict';\nexport default Math.log10 || function (a) {\n\treturn Math.log(a) / Math.log(10);\n};\n","/**\n * Check if one number is multiple of other\n *\n * @module  mumath/is-multiple\n */\n\nimport almost from './almost';\n\nexport default function isMultiple(a, b, eps) {\n\tvar remainder = a % b;\n\n\tif (!eps) eps = almost.FLT_EPSILON;\n\n\tif (!remainder) return true;\n\tif (almost(0, remainder, eps, 0) || almost(Math.abs(b), Math.abs(remainder), eps, 0)) return true;\n\n\treturn false;\n}\n","/**\n * Get step out of the set\n *\n * @module mumath/step\n */\n'use strict';\n\nimport lg from './log10';\n\nexport default function (minStep, srcSteps) {\n\tvar power = Math.floor(lg(minStep));\n\n\tvar order = Math.pow(10, power);\n\tvar steps = srcSteps.map(v => v*order);\n\torder = Math.pow(10, power+1);\n\tsteps = steps.concat(srcSteps.map(v => v*order));\n\n\t//find closest scale\n\tvar step = 0;\n\tfor (var i = 0; i < steps.length; i++) {\n\t\tstep = steps[i];\n\t\tif (step >= minStep) break;\n\t}\n\n\treturn step;\n};\n","/**\n * MIT © Sindre Sorhus\n * https://github.com/sindresorhus/is-plain-obj/blob/master/index.js\n */\nexport default (value) => {\n\tif (Object.prototype.toString.call(value) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tconst prototype = Object.getPrototypeOf(value);\n\treturn prototype === null || prototype === Object.getPrototypeOf({});\n};\n","/**\n * Composed set of all math utils, wrapped\n *\n * @module  mumath\n */\n\nexport { default as clamp } from './clamp';\nexport { default as len } from './len';\nexport { default as lerp } from './lerp';\nexport { default as mod } from './mod';\nexport { default as round } from './round';\nexport { default as range } from './range';\nexport { default as order } from './order';\nexport { default as normalize } from './normalize';\nexport { default as almost } from './almost';\nexport { default as lg } from './log10';\nexport { default as isMultiple } from './is-multiple';\nexport { default as scale } from './scale';\nexport { default as pad } from './left-pad';\nexport { default as parseUnit } from './parse-unit';\nexport { default as toPx } from './to-px';\nexport { default as isObj } from './is-plain-obj';","import EventEmitter2 from 'eventemitter2';\n\nclass Base extends EventEmitter2 {\n  constructor(options) {\n    super(options);\n    this._options = options || {};\n    Object.assign(this, options);\n  }\n}\n\nexport default Base;\n","export default alpha;\n\nfunction alpha (color, value) {\n\tlet obj = color.replace(/[^\\d,]/g, '').split(',');\n  if (value == null) value = obj[3] || 1;\n  obj[3] = value;\n\treturn 'rgba('+obj.join(',')+')';\n}\n","/* eslint-disable consistent-return */\nimport alpha from '../lib/color-alpha';\nimport {\n  range, almost, scale, isMultiple, lg\n} from '../lib/mumath/index';\n\nconst gridStyle = {\n  steps: [1, 2, 5],\n  distance: 20,\n  unit: 10,\n  lines: (state) => {\n    const coord = state.coordinate;\n    // eslint-disable-next-line no-multi-assign\n    const step = state.step = scale(coord.distance * coord.zoom, coord.steps);\n    return range(Math.floor(state.offset / step) * step,\n      Math.ceil((state.offset + state.range) / step + 1) * step, step);\n  },\n  lineColor: (state) => {\n    if (!state.lines) return;\n    const coord = state.coordinate;\n\n    const light = alpha(coord.color, 0.1);\n    const heavy = alpha(coord.color, 0.3);\n\n    const step = state.step;\n    const power = Math.ceil(lg(step));\n    const tenStep = 10 ** power;\n    const nextStep = 10 ** (power + 1);\n    const eps = step / 10;\n    const colors = state.lines.map(v => {\n      if (isMultiple(v, nextStep, eps)) return heavy;\n      if (isMultiple(v, tenStep, eps)) return light;\n      return null;\n    });\n    return colors;\n  },\n  ticks: state => {\n    if (!state.lines) return;\n    const coord = state.coordinate;\n    const step = scale(scale(state.step * 1.1, coord.steps) * 1.1, coord.steps);\n    const eps = step / 10;\n    const tickWidth = state.axisWidth * 4;\n    return state.lines.map(v => {\n      if (!isMultiple(v, step, eps)) return null;\n      if (almost(v, 0, eps)) return null;\n      return tickWidth;\n    });\n  },\n  labels: state => {\n    if (!state.lines) return;\n    const coord = state.coordinate;\n\n    const step = scale(scale(state.step * 1.1, coord.steps) * 1.1, coord.steps);\n    // let precision = clamp(Math.abs(Math.floor(lg(step))), 10, 20);\n    const eps = step / 100;\n    return state.lines.map(v => {\n      if (!isMultiple(v, step, eps)) return null;\n      if (almost(v, 0, eps)) return coord.orientation === 'y' ? null : '0';\n      v = Number((v / 100).toFixed(2));\n      return coord.format(v);\n    });\n  }\n};\n\nexport default gridStyle;\n","class Axis {\n  constructor(orientation, options) {\n    Object.assign(this, options);\n    this.orientation = orientation || 'x';\n  }\n\n  getCoords(values) {\n    const coords = [];\n    if (!values) return coords;\n    for (let i = 0; i < values.length; i += 1) {\n      const t = this.getRatio(values[i]);\n      coords.push(t);\n      coords.push(0);\n      coords.push(t);\n      coords.push(1);\n    }\n    return coords;\n  }\n\n  getRange() {\n    let len = this.width;\n    if (this.orientation === 'y') len = this.height;\n    return len * this.zoom;\n  }\n\n  getRatio(value) {\n    return (value - this.offset) / this.range;\n  }\n\n  setOffset(offset) {\n    this.offset = offset;\n  }\n\n  update(options) {\n    options = options || {};\n    Object.assign(this, options);\n\n    this.range = this.getRange();\n  }\n}\nexport default Axis;\n","import alpha from '../lib/color-alpha';\nimport Base from '../core/Base';\nimport {\n  clamp, almost, len, parseUnit, toPx, isObj\n} from '../lib/mumath/index';\nimport gridStyle from './gridStyle';\nimport Axis from './Axis';\nimport { Point } from '../geometry/Point';\n\n// constructor\nclass Grid extends Base {\n  constructor(canvas, opts) {\n    super(opts);\n    this.canvas = canvas;\n    this.context = this.canvas.getContext('2d');\n    this.state = {};\n    this.setDefaults();\n    this.update(opts);\n  }\n\n  render() {\n    this.draw();\n    return this;\n  }\n\n  getCenterCoords() {\n    let state = this.state.x;\n    let [width, height] = state.shape;\n    let [pt, pr, pb, pl] = state.padding;\n    let axisCoords = state.opposite.coordinate.getCoords(\n      [state.coordinate.axisOrigin],\n      state.opposite\n    );\n    const y = pt + axisCoords[1] * (height - pt - pb);\n    state = this.state.y;\n    [width, height] = state.shape;\n    [pt, pr, pb, pl] = state.padding;\n    axisCoords = state.opposite.coordinate.getCoords([state.coordinate.axisOrigin], state.opposite);\n    const x = pl + axisCoords[0] * (width - pr - pl);\n    return { x, y };\n  }\n\n  setSize(width, height) {\n    this.setWidth(width);\n    this.setHeight(height);\n  }\n\n  setWidth(width) {\n    this.canvas.width = width;\n  }\n\n  setHeight(height) {\n    this.canvas.height = height;\n  }\n\n  // re-evaluate lines, calc options for renderer\n  update(opts) {\n    if (!opts) opts = {};\n    const shape = [this.canvas.width, this.canvas.height];\n\n    // recalc state\n    this.state.x = this.calcCoordinate(this.axisX, shape, this);\n    this.state.y = this.calcCoordinate(this.axisY, shape, this);\n    this.state.x.opposite = this.state.y;\n    this.state.y.opposite = this.state.x;\n    this.emit('update', opts);\n    return this;\n  }\n\n  // re-evaluate lines, calc options for renderer\n  update2(center) {\n    const shape = [this.canvas.width, this.canvas.height];\n    Object.assign(this.center, center);\n    // recalc state\n    this.state.x = this.calcCoordinate(this.axisX, shape, this);\n    this.state.y = this.calcCoordinate(this.axisY, shape, this);\n    this.state.x.opposite = this.state.y;\n    this.state.y.opposite = this.state.x;\n    this.emit('update', center);\n\n    this.axisX.offset = center.x;\n    this.axisX.zoom = 1 / center.zoom;\n\n    this.axisY.offset = center.y;\n    this.axisY.zoom = 1 / center.zoom;\n  }\n\n  // get state object with calculated params, ready for rendering\n  calcCoordinate(coord, shape) {\n    const state = {\n      coordinate: coord,\n      shape,\n      grid: this\n    };\n    // calculate real offset/range\n    state.range = coord.getRange(state);\n    state.offset = clamp(\n      coord.offset - state.range * clamp(0.5, 0, 1),\n      Math.max(coord.min, -Number.MAX_VALUE + 1),\n      Math.min(coord.max, Number.MAX_VALUE) - state.range\n    );\n\n    state.zoom = coord.zoom;\n    // calc style\n    state.axisColor = typeof coord.axisColor === 'number'\n      ? alpha(coord.color, coord.axisColor)\n      : coord.axisColor || coord.color;\n\n    state.axisWidth = coord.axisWidth || coord.lineWidth;\n    state.lineWidth = coord.lineWidth;\n    state.tickAlign = coord.tickAlign;\n    state.labelColor = state.color;\n    // get padding\n    if (typeof coord.padding === 'number') {\n      state.padding = Array(4).fill(coord.padding);\n    } else if (coord.padding instanceof Function) {\n      state.padding = coord.padding(state);\n    } else {\n      state.padding = coord.padding;\n    }\n    // calc font\n    if (typeof coord.fontSize === 'number') {\n      state.fontSize = coord.fontSize;\n    } else {\n      const units = parseUnit(coord.fontSize);\n      state.fontSize = units[0] * toPx(units[1]);\n    }\n    state.fontFamily = coord.fontFamily || 'sans-serif';\n    // get lines stops, including joined list of values\n    let lines;\n    if (coord.lines instanceof Function) {\n      lines = coord.lines(state);\n    } else {\n      lines = coord.lines || [];\n    }\n    state.lines = lines;\n    // calc colors\n    if (coord.lineColor instanceof Function) {\n      state.lineColors = coord.lineColor(state);\n    } else if (Array.isArray(coord.lineColor)) {\n      state.lineColors = coord.lineColor;\n    } else {\n      let color = alpha(coord.color, coord.lineColor);\n      if (typeof coord.lineColor !== 'number') {\n        color = coord.lineColor === false || coord.lineColor == null ? null : coord.color;\n      }\n      state.lineColors = Array(lines.length).fill(color);\n    }\n    // calc ticks\n    let ticks;\n    if (coord.ticks instanceof Function) {\n      ticks = coord.ticks(state);\n    } else if (Array.isArray(coord.ticks)) {\n      ticks = coord.ticks;\n    } else {\n      const tick = coord.ticks === true || coord.ticks === true\n        ? state.axisWidth * 2 : coord.ticks || 0;\n      ticks = Array(lines.length).fill(tick);\n    }\n    state.ticks = ticks;\n    // calc labels\n    let labels;\n    if (coord.labels === true) labels = state.lines;\n    else if (coord.labels instanceof Function) {\n      labels = coord.labels(state);\n    } else if (Array.isArray(coord.labels)) {\n      labels = coord.labels;\n    } else if (isObj(coord.labels)) {\n      labels = coord.labels;\n    } else {\n      labels = Array(state.lines.length).fill(null);\n    }\n    state.labels = labels;\n    // convert hashmap ticks/labels to lines + colors\n    if (isObj(ticks)) {\n      state.ticks = Array(lines.length).fill(0);\n    }\n    if (isObj(labels)) {\n      state.labels = Array(lines.length).fill(null);\n    }\n    if (isObj(ticks)) {\n      // eslint-disable-next-line guard-for-in\n      Object.keys(ticks).forEach((value, tick) => {\n        state.ticks.push(tick);\n        state.lines.push(parseFloat(value));\n        state.lineColors.push(null);\n        state.labels.push(null);\n      });\n    }\n\n    if (isObj(labels)) {\n      Object.keys(labels).forEach((label, value) => {\n        state.labels.push(label);\n        state.lines.push(parseFloat(value));\n        state.lineColors.push(null);\n        state.ticks.push(null);\n      });\n    }\n\n    return state;\n  }\n\n  setDefaults() {\n    this.pixelRatio = window.devicePixelRatio;\n    this.autostart = true;\n    this.interactions = true;\n\n    this.defaults = Object.assign(\n      {\n        type: 'linear',\n        name: '',\n        units: '',\n        state: {},\n\n        // visible range params\n        minZoom: -Infinity,\n        maxZoom: Infinity,\n        min: -Infinity,\n        max: Infinity,\n        offset: 0,\n        origin: 0.5,\n        center: {\n          x: 0,\n          y: 0,\n          zoom: 1\n        },\n        zoom: 1,\n        zoomEnabled: true,\n        panEnabled: true,\n\n        // labels\n        labels: true,\n        fontSize: '11pt',\n        fontFamily: 'sans-serif',\n        padding: 0,\n        color: 'rgb(0,0,0,1)',\n\n        // lines params\n        lines: true,\n        tick: 8,\n        tickAlign: 0.5,\n        lineWidth: 1,\n        distance: 13,\n        style: 'lines',\n        lineColor: 0.4,\n\n        // axis params\n        axis: true,\n        axisOrigin: 0,\n        axisWidth: 2,\n        axisColor: 0.8,\n\n        // stub methods\n        // return coords for the values, redefined by axes\n        getCoords: () => [0, 0, 0, 0],\n\n        // return 0..1 ratio based on value/offset/range, redefined by axes\n        getRatio: () => 0,\n\n        // default label formatter\n        format: v => v\n      },\n      gridStyle,\n      this._options\n    );\n\n    this.axisX = new Axis('x', this.defaults);\n    this.axisY = new Axis('y', this.defaults);\n\n    this.axisX = Object.assign({}, this.defaults, {\n      orientation: 'x',\n      offset: this.center.x,\n      getCoords: (values, state) => {\n        const coords = [];\n        if (!values) return coords;\n        for (let i = 0; i < values.length; i += 1) {\n          const t = state.coordinate.getRatio(values[i], state);\n          coords.push(t);\n          coords.push(0);\n          coords.push(t);\n          coords.push(1);\n        }\n        return coords;\n      },\n      getRange: state => state.shape[0] * state.coordinate.zoom,\n      // FIXME: handle infinity case here\n      getRatio: (value, state) => (value - state.offset) / state.range\n    });\n    this.axisY = Object.assign({}, this.defaults, {\n      orientation: 'y',\n      offset: this.center.y,\n      getCoords: (values, state) => {\n        const coords = [];\n        if (!values) return coords;\n        for (let i = 0; i < values.length; i += 1) {\n          const t = state.coordinate.getRatio(values[i], state);\n          coords.push(0);\n          coords.push(t);\n          coords.push(1);\n          coords.push(t);\n        }\n        return coords;\n      },\n      getRange: state => state.shape[1] * state.coordinate.zoom,\n      getRatio: (value, state) => 1 - (value - state.offset) / state.range\n    });\n\n    Object.assign(this, this.defaults);\n    Object.assign(this, this._options);\n\n    this.center = new Point(this.center);\n  }\n\n  // draw grid to the canvas\n  draw() {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    this.drawLines(this.state.x);\n    this.drawLines(this.state.y);\n    return this;\n  }\n\n  // lines instance draw\n  drawLines(state) {\n    // draw lines and sublines\n    if (!state || !state.coordinate) return;\n\n    const ctx = this.context;\n    const [width, height] = state.shape;\n    const left = 0;\n    const top = 0;\n    const [pt, pr, pb, pl] = state.padding;\n\n    let axisRatio = state.opposite.coordinate.getRatio(state.coordinate.axisOrigin, state.opposite);\n    axisRatio = clamp(axisRatio, 0, 1);\n    const coords = state.coordinate.getCoords(state.lines, state);\n    // draw state.lines\n    ctx.lineWidth = 1; // state.lineWidth/2.;\n    for (let i = 0, j = 0; i < coords.length; i += 4, j += 1) {\n      const color = state.lineColors[j];\n      if (!color) continue;\n      ctx.strokeStyle = color;\n      ctx.beginPath();\n      const x1 = left + pl + coords[i] * (width - pr - pl);\n      const y1 = top + pt + coords[i + 1] * (height - pb - pt);\n      const x2 = left + pl + coords[i + 2] * (width - pr - pl);\n      const y2 = top + pt + coords[i + 3] * (height - pb - pt);\n      ctx.moveTo(x1, y1);\n      ctx.lineTo(x2, y2);\n      ctx.stroke();\n      ctx.closePath();\n    }\n    const normals = [];\n    for (let i = 0; i < coords.length; i += 4) {\n      const x1 = coords[i];\n      const y1 = coords[i + 1];\n      const x2 = coords[i + 2];\n      const y2 = coords[i + 3];\n      const xDif = x2 - x1;\n      const yDif = y2 - y1;\n      const dist = len(xDif, yDif);\n      normals.push(xDif / dist);\n      normals.push(yDif / dist);\n    }\n    // calc state.labels/tick coords\n    const tickCoords = [];\n    state.labelCoords = [];\n    const ticks = state.ticks;\n    for (let i = 0, j = 0, k = 0; i < normals.length; k += 1, i += 2, j += 4) {\n      const x1 = coords[j];\n      const y1 = coords[j + 1];\n      const x2 = coords[j + 2];\n      const y2 = coords[j + 3];\n      const xDif = (x2 - x1) * axisRatio;\n      const yDif = (y2 - y1) * axisRatio;\n      const tick = [\n        (normals[i] * ticks[k]) / (width - pl - pr),\n        (normals[i + 1] * ticks[k]) / (height - pt - pb)\n      ];\n      tickCoords.push(normals[i] * (xDif + tick[0] * state.tickAlign) + x1);\n      tickCoords.push(normals[i + 1] * (yDif + tick[1] * state.tickAlign) + y1);\n      tickCoords.push(normals[i] * (xDif - tick[0] * (1 - state.tickAlign)) + x1);\n      tickCoords.push(normals[i + 1] * (yDif - tick[1] * (1 - state.tickAlign)) + y1);\n      state.labelCoords.push(normals[i] * xDif + x1);\n      state.labelCoords.push(normals[i + 1] * yDif + y1);\n    }\n    // draw ticks\n    if (ticks.length) {\n      ctx.lineWidth = state.axisWidth / 2;\n      ctx.beginPath();\n      for (let i = 0, j = 0; i < tickCoords.length; i += 4, j += 1) {\n        if (almost(state.lines[j], state.opposite.coordinate.axisOrigin)) continue;\n        const x1 = left + pl + tickCoords[i] * (width - pl - pr);\n        const y1 = top + pt + tickCoords[i + 1] * (height - pt - pb);\n        const x2 = left + pl + tickCoords[i + 2] * (width - pl - pr);\n        const y2 = top + pt + tickCoords[i + 3] * (height - pt - pb);\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x2, y2);\n      }\n      ctx.strokeStyle = state.axisColor;\n      ctx.stroke();\n      ctx.closePath();\n    }\n    // draw axis\n    if (state.coordinate.axis && state.axisColor) {\n      const axisCoords = state.opposite.coordinate.getCoords(\n        [state.coordinate.axisOrigin],\n        state.opposite\n      );\n      ctx.lineWidth = state.axisWidth / 2;\n      const x1 = left + pl + clamp(axisCoords[0], 0, 1) * (width - pr - pl);\n      const y1 = top + pt + clamp(axisCoords[1], 0, 1) * (height - pt - pb);\n      const x2 = left + pl + clamp(axisCoords[2], 0, 1) * (width - pr - pl);\n      const y2 = top + pt + clamp(axisCoords[3], 0, 1) * (height - pt - pb);\n      ctx.beginPath();\n      ctx.moveTo(x1, y1);\n      ctx.lineTo(x2, y2);\n      ctx.strokeStyle = state.axisColor;\n      ctx.stroke();\n      ctx.closePath();\n    }\n    // draw state.labels\n    this.drawLabels(state);\n  }\n\n  drawLabels(state) {\n    if (state.labels) {\n      const ctx = this.context;\n      const [width, height] = state.shape;\n      const [pt, pr, pb, pl] = state.padding;\n\n      ctx.font = `300 ${state.fontSize}px ${state.fontFamily}`;\n      ctx.fillStyle = state.labelColor;\n      ctx.textBaseline = 'top';\n      const textHeight = state.fontSize;\n      const indent = state.axisWidth + 1.5;\n      const textOffset = state.tickAlign < 0.5\n        ? -textHeight - state.axisWidth * 2 : state.axisWidth * 2;\n      const isOpp = state.coordinate.orientation === 'y' && !state.opposite.disabled;\n      for (let i = 0; i < state.labels.length; i += 1) {\n        let label = state.labels[i];\n        if (label == null) continue;\n\n        if (isOpp && almost(state.lines[i], state.opposite.coordinate.axisOrigin)) continue;\n\n        const textWidth = ctx.measureText(label).width;\n\n        let textLeft = state.labelCoords[i * 2] * (width - pl - pr) + indent + pl;\n\n        if (state.coordinate.orientation === 'y') {\n          textLeft = clamp(textLeft, indent, width - textWidth - 1 - state.axisWidth);\n          label *= -1;\n        }\n\n        let textTop = state.labelCoords[i * 2 + 1] * (height - pt - pb) + textOffset + pt;\n        if (state.coordinate.orientation === 'x') {\n          textTop = clamp(textTop, 0, height - textHeight - textOffset);\n        }\n        ctx.fillText(label, textLeft, textTop);\n      }\n    }\n  }\n}\n\nexport default Grid;\n","import { Modes } from '../core/Constants';\n\nconst ModesMixin = (superclass) => class extends superclass {\n  constructor(options) {\n    super(options);\n    console.log('modesMixin');\n  }\n\n  /**\n       * MODES\n       */\n  setMode(mode) {\n    this.mode = mode;\n\n    switch (mode) {\n      case Modes.SELECT:\n        this.canvas.isDrawingMode = false;\n        this.canvas.interactive = true;\n        this.canvas.selection = true;\n        this.canvas.hoverCursor = 'default';\n        this.canvas.moveCursor = 'default';\n        this.canvas.setCursor('default');\n        break;\n      case Modes.GRAB:\n        this.canvas.isDrawingMode = false;\n        this.canvas.interactive = false;\n        this.canvas.selection = false;\n        this.canvas.discardActiveObject();\n        this.canvas.hoverCursor = 'move';\n        this.canvas.moveCursor = 'move';\n        this.canvas.setCursor('move');\n        break;\n      case Modes.DRAW:\n        this.canvas.isDrawingMode = true;\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  setModeAsDraw() {\n    this.setMode(Modes.DRAW);\n    console.log('MODE: DRAW');\n  }\n\n  setModeAsSelect() {\n    this.setMode(Modes.SELECT);\n    console.log('MODE: SELECT');\n  }\n\n  setModeAsGrab() {\n    this.setMode(Modes.GRAB);\n    console.log('MODE: GRAB');\n  }\n\n  isSelectMode() {\n    return this.mode === Modes.SELECT;\n  }\n\n  isGrabMode() {\n    return this.mode === Modes.GRAB;\n  }\n\n  isDrawMode() {\n    return this.mode === Modes.DRAW;\n  }\n};\n\nexport default ModesMixin;\n","'use strict';\n\n// used by apply() and isApplicationOf()\nconst _appliedMixin = '__mixwith_appliedMixin';\n\n/**\n * A function that returns a subclass of its argument.\n *\n * @example\n * const M = (superclass) => class extends superclass {\n *   getMessage() {\n *     return \"Hello\";\n *   }\n * }\n *\n * @typedef {Function} MixinFunction\n * @param {Function} superclass\n * @return {Function} A subclass of `superclass`\n */\n\n/**\n * Applies `mixin` to `superclass`.\n *\n * `apply` stores a reference from the mixin application to the unwrapped mixin\n * to make `isApplicationOf` and `hasMixin` work.\n *\n * This function is usefull for mixin wrappers that want to automatically enable\n * {@link hasMixin} support.\n *\n * @example\n * const Applier = (mixin) => wrap(mixin, (superclass) => apply(superclass, mixin));\n *\n * // M now works with `hasMixin` and `isApplicationOf`\n * const M = Applier((superclass) => class extends superclass {});\n *\n * class C extends M(Object) {}\n * let i = new C();\n * hasMixin(i, M); // true\n *\n * @function\n * @param {Function} superclass A class or constructor function\n * @param {MixinFunction} mixin The mixin to apply\n * @return {Function} A subclass of `superclass` produced by `mixin`\n */\nexport const apply = (superclass, mixin) => {\n  let application = mixin(superclass);\n  application.prototype[_appliedMixin] = unwrap(mixin);\n  return application;\n};\n\n/**\n * Returns `true` iff `proto` is a prototype created by the application of\n * `mixin` to a superclass.\n *\n * `isApplicationOf` works by checking that `proto` has a reference to `mixin`\n * as created by `apply`.\n *\n * @function\n * @param {Object} proto A prototype object created by {@link apply}.\n * @param {MixinFunction} mixin A mixin function used with {@link apply}.\n * @return {boolean} whether `proto` is a prototype created by the application of\n * `mixin` to a superclass\n */\nexport const isApplicationOf = (proto, mixin) =>\n  proto.hasOwnProperty(_appliedMixin) && proto[_appliedMixin] === unwrap(mixin);\n\n/**\n * Returns `true` iff `o` has an application of `mixin` on its prototype\n * chain.\n *\n * @function\n * @param {Object} o An object\n * @param {MixinFunction} mixin A mixin applied with {@link apply}\n * @return {boolean} whether `o` has an application of `mixin` on its prototype\n * chain\n */\nexport const hasMixin = (o, mixin) => {\n  while (o != null) {\n    if (isApplicationOf(o, mixin)) return true;\n    o = Object.getPrototypeOf(o);\n  }\n  return false;\n}\n\n\n// used by wrap() and unwrap()\nconst _wrappedMixin = '__mixwith_wrappedMixin';\n\n/**\n * Sets up the function `mixin` to be wrapped by the function `wrapper`, while\n * allowing properties on `mixin` to be available via `wrapper`, and allowing\n * `wrapper` to be unwrapped to get to the original function.\n *\n * `wrap` does two things:\n *   1. Sets the prototype of `mixin` to `wrapper` so that properties set on\n *      `mixin` inherited by `wrapper`.\n *   2. Sets a special property on `mixin` that points back to `mixin` so that\n *      it can be retreived from `wrapper`\n *\n * @function\n * @param {MixinFunction} mixin A mixin function\n * @param {MixinFunction} wrapper A function that wraps {@link mixin}\n * @return {MixinFunction} `wrapper`\n */\nexport const wrap = (mixin, wrapper) => {\n  Object.setPrototypeOf(wrapper, mixin);\n  if (!mixin[_wrappedMixin]) {\n    mixin[_wrappedMixin] = mixin;\n  }\n  return wrapper;\n};\n\n/**\n * Unwraps the function `wrapper` to return the original function wrapped by\n * one or more calls to `wrap`. Returns `wrapper` if it's not a wrapped\n * function.\n *\n * @function\n * @param {MixinFunction} wrapper A wrapped mixin produced by {@link wrap}\n * @return {MixinFunction} The originally wrapped mixin\n */\nexport const unwrap = (wrapper) => wrapper[_wrappedMixin] || wrapper;\n\nconst _cachedApplications = '__mixwith_cachedApplications';\n\n/**\n * Decorates `mixin` so that it caches its applications. When applied multiple\n * times to the same superclass, `mixin` will only create one subclass, memoize\n * it and return it for each application.\n *\n * Note: If `mixin` somehow stores properties its classes constructor (static\n * properties), or on its classes prototype, it will be shared across all\n * applications of `mixin` to a super class. It's reccomended that `mixin` only\n * access instance state.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to wrap with caching behavior\n * @return {MixinFunction} a new mixin function\n */\nexport const Cached = (mixin) => wrap(mixin, (superclass) => {\n  // Get or create a symbol used to look up a previous application of mixin\n  // to the class. This symbol is unique per mixin definition, so a class will have N\n  // applicationRefs if it has had N mixins applied to it. A mixin will have\n  // exactly one _cachedApplicationRef used to store its applications.\n\n  let cachedApplications = superclass[_cachedApplications];\n  if (!cachedApplications) {\n    cachedApplications = superclass[_cachedApplications] = new Map();\n  }\n\n  let application = cachedApplications.get(mixin);\n  if (!application) {\n    application = mixin(superclass);\n    cachedApplications.set(mixin, application);\n  }\n\n  return application;\n});\n\n/**\n * Decorates `mixin` so that it only applies if it's not already on the\n * prototype chain.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to wrap with deduplication behavior\n * @return {MixinFunction} a new mixin function\n */\nexport const DeDupe = (mixin) => wrap(mixin, (superclass) =>\n    (hasMixin(superclass.prototype, mixin))\n      ? superclass\n      : mixin(superclass));\n\n/**\n * Adds [Symbol.hasInstance] (ES2015 custom instanceof support) to `mixin`.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to add [Symbol.hasInstance] to\n * @return {MixinFunction} the given mixin function\n */\nexport const HasInstance = (mixin) => {\n  if (Symbol && Symbol.hasInstance && !mixin[Symbol.hasInstance]) {\n    Object.defineProperty(mixin, Symbol.hasInstance, {\n      value(o) {\n        return hasMixin(o, mixin);\n      },\n    });\n  }\n  return mixin;\n};\n\n/**\n * A basic mixin decorator that applies the mixin with {@link apply} so that it\n * can be used with {@link isApplicationOf}, {@link hasMixin} and the other\n * mixin decorator functions.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to wrap\n * @return {MixinFunction} a new mixin function\n */\nexport const BareMixin = (mixin) => wrap(mixin, (s) => apply(s, mixin));\n\n/**\n * Decorates a mixin function to add deduplication, application caching and\n * instanceof support.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to wrap\n * @return {MixinFunction} a new mixin function\n */\nexport const Mixin = (mixin) => DeDupe(Cached(BareMixin(mixin)));\n\n/**\n * A fluent interface to apply a list of mixins to a superclass.\n *\n * ```javascript\n * class X extends mix(Object).with(A, B, C) {}\n * ```\n *\n * The mixins are applied in order to the superclass, so the prototype chain\n * will be: X->C'->B'->A'->Object.\n *\n * This is purely a convenience function. The above example is equivalent to:\n *\n * ```javascript\n * class X extends C(B(A(Object))) {}\n * ```\n *\n * @function\n * @param {Function} [superclass=Object]\n * @return {MixinBuilder}\n */\nexport const mix = (superclass) => new MixinBuilder(superclass);\n\nclass MixinBuilder {\n\n  constructor(superclass) {\n    this.superclass = superclass || class {};\n  }\n\n  /**\n   * Applies `mixins` in order to the superclass given to `mix()`.\n   *\n   * @param {Array.<Mixin>} mixins\n   * @return {Function} a subclass of `superclass` with `mixins` applied\n   */\n  with(...mixins) {\n    return mixins.reduce((c, m) => m(c), this.superclass);\n  }\n}","import panzoom from '../lib/panzoom';\nimport { clamp } from '../lib/mumath/index';\n\nimport Base from '../core/Base';\nimport { MAP, Modes } from '../core/Constants';\nimport Grid from '../grid/Grid';\nimport { Point } from '../geometry/Point';\nimport ModesMixin from './ModesMixin';\nimport { mix } from '../lib/mix';\n\nexport class Map extends mix(Base).with(ModesMixin) {\n  constructor(container, options) {\n    super(options);\n\n    this.defaults = Object.assign({}, MAP);\n\n    // set defaults\n    Object.assign(this, this.defaults);\n\n    // overwrite options\n    Object.assign(this, this._options);\n\n    this.center = new Point(this.center);\n\n    this.container = container || document.body;\n\n    const canvas = document.createElement('canvas');\n    this.container.appendChild(canvas);\n    canvas.setAttribute('id', 'indoors-map-canvas');\n\n    canvas.width = this.width || this.container.clientWidth;\n    canvas.height = this.height || this.container.clientHeight;\n\n    this.canvas = new fabric.Canvas(canvas, {\n      preserveObjectStacking: true\n    });\n    this.context = this.canvas.getContext('2d');\n\n    this.on('render', () => {\n      if (this.autostart) this.clear();\n    });\n\n    this.originX = -this.canvas.width / 2;\n    this.originY = -this.canvas.height / 2;\n\n    this.canvas.absolutePan({\n      x: this.originX,\n      y: this.originY\n    });\n\n    // this.center = {\n    //   x: this.canvas.width / 2.0,\n    //   y: this.canvas.height / 2.0\n    // };\n\n    this.x = this.center.x;\n    this.y = this.center.y;\n    this.dx = 0;\n    this.dy = 0;\n\n    try {\n      this.addFloorPlan();\n    } catch (e) {\n      console.error(e);\n    }\n    this.addGrid();\n\n    this.setMode(this.mode || Modes.GRAB);\n\n    const vm = this;\n    panzoom(this.container, e => {\n      vm.panzoom(e);\n    });\n\n    this.registerListeners();\n\n    setTimeout(() => {\n      this.emit('ready', this);\n    }, 300);\n  }\n\n  addFloorPlan() {\n    if (!this.floorplan) return;\n    const vm = this;\n    this.floorplan.on('load', img => {\n      vm.addLayer(img);\n    });\n  }\n\n  addLayer(layer) {\n    if (!layer.shape) {\n      console.error('shape is undefined');\n      return;\n    }\n    this.canvas.add(layer.shape);\n    this.canvas._objects.sort((o1, o2) => o1.zIndex - o2.zIndex);\n\n    if (layer.shape.keepOnZoom) {\n      layer.shape._set('scaleX', 1 / this.zoom);\n      layer.shape._set('scaleY', 1 / this.zoom);\n      this.emit(`${layer.class}scaling`, layer);\n    }\n    if (layer.class) {\n      this.emit(`${layer.class}:added`, layer);\n    }\n\n    // this.update();\n    // this.canvas.renderAll();\n  }\n\n  removeLayer(layer) {\n    if (!layer || !layer.shape) return;\n    if (layer.class) {\n      this.emit(`${layer.class}:removed`, layer);\n    }\n    this.canvas.remove(layer.shape);\n  }\n\n  addGrid() {\n    this.gridCanvas = this.cloneCanvas();\n    this.gridCanvas.setAttribute('id', 'indoors-grid-canvas');\n    this.grid = new Grid(this.gridCanvas, this);\n    this.grid.draw();\n  }\n\n  moveTo(obj, index) {\n    if (index !== undefined) {\n      obj.zIndex = index;\n    }\n    this.canvas.moveTo(obj.shape, obj.zIndex);\n  }\n\n  cloneCanvas(canvas) {\n    canvas = canvas || this.canvas;\n    const clone = document.createElement('canvas');\n    clone.width = canvas.width;\n    clone.height = canvas.height;\n    canvas.wrapperEl.appendChild(clone);\n    return clone;\n  }\n\n  setZoom(zoom) {\n    const { width, height } = this.canvas;\n    this.zoom = clamp(zoom, this.minZoom, this.maxZoom);\n    this.dx = 0;\n    this.dy = 0;\n    this.x = width / 2.0;\n    this.y = height / 2.0;\n    this.update();\n    process.nextTick(() => {\n      this.update();\n    });\n  }\n\n  getBounds() {\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n\n    this.canvas.forEachObject((obj) => {\n      const coords = obj.getBounds();\n\n      coords.forEach((point) => {\n        minX = Math.min(minX, point.x);\n        maxX = Math.max(maxX, point.x);\n        minY = Math.min(minY, point.y);\n        maxY = Math.max(maxY, point.y);\n      });\n    });\n\n    return [new Point(minX, minY), new Point(maxX, maxY)];\n  }\n\n  fitBounds(padding = 100) {\n    this.onResize();\n\n    const { width, height } = this.canvas;\n\n    this.originX = -this.canvas.width / 2;\n    this.originY = -this.canvas.height / 2;\n\n    const bounds = this.getBounds();\n\n    this.center.x = (bounds[0].x + bounds[1].x) / 2.0;\n    this.center.y = -(bounds[0].y + bounds[1].y) / 2.0;\n\n    const boundWidth = Math.abs(bounds[0].x - bounds[1].x) + padding;\n    const boundHeight = Math.abs(bounds[0].y - bounds[1].y) + padding;\n    const scaleX = width / boundWidth;\n    const scaleY = height / boundHeight;\n\n    this.zoom = Math.min(scaleX, scaleY);\n\n    this.canvas.setZoom(this.zoom);\n\n    this.canvas.absolutePan({\n      x: this.originX + this.center.x * this.zoom,\n      y: this.originY - this.center.y * this.zoom\n    });\n\n    this.update();\n    process.nextTick(() => {\n      this.update();\n    });\n  }\n\n  reset() {\n    const { width, height } = this.canvas;\n    this.zoom = this._options.zoom || 1;\n    this.center = new Point();\n    this.originX = -this.canvas.width / 2;\n    this.originY = -this.canvas.height / 2;\n    this.canvas.absolutePan({\n      x: this.originX,\n      y: this.originY\n    });\n    this.x = width / 2.0;\n    this.y = height / 2.0;\n    this.update();\n    process.nextTick(() => {\n      this.update();\n    });\n  }\n\n  onResize(width, height) {\n    const oldWidth = this.canvas.width;\n    const oldHeight = this.canvas.height;\n\n    width = width || this.container.clientWidth;\n    height = height || this.container.clientHeight;\n\n    this.canvas.setWidth(width);\n    this.canvas.setHeight(height);\n\n    this.grid.setSize(width, height);\n\n    const dx = width / 2.0 - oldWidth / 2.0;\n    const dy = height / 2.0 - oldHeight / 2.0;\n\n    this.canvas.relativePan({\n      x: dx,\n      y: dy\n    });\n\n    this.update();\n  }\n\n  update() {\n    const canvas = this.canvas;\n\n    this.grid.update2({\n      x: this.center.x,\n      y: this.center.y,\n      zoom: this.zoom\n    });\n\n    this.emit('update', this);\n    this.grid.render();\n\n    canvas.zoomToPoint(new Point(this.x, this.y), this.zoom);\n\n    if (this.isGrabMode()) {\n      canvas.relativePan(new Point(this.dx, this.dy));\n      this.emit('panning');\n    }\n\n    const objects = canvas.getObjects();\n    for (let i = 0; i < objects.length; i += 1) {\n      const object = objects[i];\n      if (object.keepOnZoom) {\n        object._set('scaleX', 1 / this.zoom);\n        object._set('scaleY', 1 / this.zoom);\n        this.emit(`${object.class}scaling`, object);\n      }\n    }\n  }\n\n  panzoom(e) {\n    // enable interactions\n    const { width, height } = this.canvas;\n    // shift start\n    const zoom = clamp(-e.dz, -height * 0.75, height * 0.75) / height;\n\n    const prevZoom = 1 / this.zoom;\n    let curZoom = prevZoom * (1 - zoom);\n    curZoom = clamp(curZoom, this.minZoom, this.maxZoom);\n\n    let { x, y } = this.center;\n\n    // pan\n    const oX = 0.5;\n    const oY = 0.5;\n    if (this.isGrabMode()) {\n      x -= prevZoom * e.dx;\n      y += prevZoom * e.dy;\n    }\n\n    if (this.zoomEnabled) {\n      const tx = e.x / width - oX;\n      x -= width * (curZoom - prevZoom) * tx;\n      const ty = oY - e.y / height;\n      y -= height * (curZoom - prevZoom) * ty;\n    }\n    this.center.setX(x);\n    this.center.setY(y);\n    this.zoom = 1 / curZoom;\n    this.dx = e.dx;\n    this.dy = e.dy;\n    this.x = e.x0;\n    this.y = e.y0;\n    this.update();\n  }\n\n  registerListeners() {\n    const vm = this;\n\n    this.canvas.on('object:scaling', e => {\n      if (e.target.class) {\n        vm.emit(`${e.target.class}:scaling`, e.target.parent);\n        return;\n      }\n      const group = e.target;\n      if (!group.getObjects) return;\n\n      const objects = group.getObjects();\n      group.removeWithUpdate();\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        object.orgYaw = object.parent.yaw || 0;\n        object.fire('moving', object.parent);\n        vm.emit(`${object.class}:moving`, object.parent);\n      }\n      vm.update();\n      vm.canvas.renderAll();\n    });\n\n    this.canvas.on('object:rotating', e => {\n      if (e.target.class) {\n        vm.emit(`${e.target.class}:rotating`, e.target.parent);\n        return;\n      }\n      const group = e.target;\n      if (!group.getObjects) return;\n      const objects = group.getObjects();\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        if (object.class) {\n          object._set('angle', -group.angle);\n          object.parent.yaw = -group.angle + (object.orgYaw || 0);\n          // object.orgYaw = object.parent.yaw;\n          object.fire('moving', object.parent);\n          vm.emit(`${object.class}:moving`, object.parent);\n          object.fire('rotating', object.parent);\n          vm.emit(`${object.class}:rotating`, object.parent);\n        }\n      }\n      this.update();\n    });\n\n    this.canvas.on('object:moving', e => {\n      if (e.target.class) {\n        vm.emit(`${e.target.class}:moving`, e.target.parent);\n        return;\n      }\n      const group = e.target;\n      if (!group.getObjects) return;\n      const objects = group.getObjects();\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        if (object.class) {\n          object.fire('moving', object.parent);\n          vm.emit(`${object.class}:moving`, object.parent);\n        }\n      }\n      this.update();\n    });\n\n    this.canvas.on('object:moved', e => {\n      if (e.target.class) {\n        vm.emit(`${e.target.class}dragend`, e);\n      }\n      this.update();\n    });\n\n    this.canvas.on('selection:cleared', e => {\n      const objects = e.deselected;\n      if (!objects || !objects.length) return;\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        if (object.class) {\n          object._set('angle', 0);\n          object._set('scaleX', 1 / vm.zoom);\n          object._set('scaleY', 1 / vm.zoom);\n          if (object.parent) {\n            object.parent.inGroup = false;\n          }\n          object.fire('moving', object.parent);\n        }\n      }\n    });\n    this.canvas.on('selection:created', e => {\n      console.log(e);\n      const objects = e.selected;\n      if (!objects || objects.length < 2) return;\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        if (object.class && object.parent) {\n          object.parent.inGroup = true;\n          object.orgYaw = object.parent.yaw || 0;\n        }\n      }\n    });\n    this.canvas.on('selection:updated', e => {\n      console.log(e);\n      const objects = e.selected;\n      if (!objects || objects.length < 2) return;\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        if (object.class && object.parent) {\n          object.parent.inGroup = true;\n          object.orgYaw = object.parent.yaw || 0;\n        }\n      }\n    });\n\n    this.canvas.on('mouse:down', e => {\n      vm.dragObject = e.target;\n    });\n\n    this.canvas.on('mouse:move', e => {\n      if (vm.dragObject && vm.dragObject.clickable) {\n        if (vm.dragObject === e.target) {\n          vm.dragObject.dragging = true;\n        } else {\n          vm.dragObject.dragging = false;\n        }\n      }\n    });\n\n    this.canvas.on('mouse:up', e => {\n      if (vm.dragObject && vm.dragObject.clickable) {\n        if (vm.dragObject !== e.target) return;\n        if (!vm.dragObject.dragging && !vm.modeToggleByKey) {\n          console.log('click');\n          vm.emit(`${vm.dragObject.class}:click`, vm.dragObject.parent);\n        }\n        vm.dragObject.dragging = false;\n      }\n      vm.dragObject = null;\n    });\n\n    window.addEventListener('resize', () => {\n      vm.onResize();\n    });\n\n    document.addEventListener('keyup', () => {\n      if (this.modeToggleByKey && this.isGrabMode()) {\n        this.setModeAsSelect();\n        this.modeToggleByKey = false;\n      }\n    });\n\n    document.addEventListener('keydown', event => {\n      if (event.ctrlKey || event.metaKey) {\n        if (this.isSelectMode()) {\n          this.setModeAsGrab();\n        }\n        this.modeToggleByKey = true;\n      }\n    });\n  }\n\n  unregisterListeners() {\n    this.canvas.off('object:moving');\n    this.canvas.off('object:moved');\n  }\n\n  getMarkerById(id) {\n    const objects = this.canvas.getObjects();\n    for (let i = 0; i < objects.length; i += 1) {\n      const obj = objects[i];\n      if (obj.class === 'marker' && obj.id === id) {\n        return obj.parent;\n      }\n    }\n    return null;\n  }\n\n  getMarkers() {\n    const list = [];\n    const objects = this.canvas.getObjects();\n    for (let i = 0; i < objects.length; i += 1) {\n      const obj = objects[i];\n      if (obj.class === 'marker') {\n        list.push(obj.parent);\n      }\n    }\n    return list;\n  }\n}\n\nexport const map = (container, options) => new Map(container, options);\n","import { Point } from '../geometry/Point';\n\nexport class Group extends fabric.Group {\n  constructor(objects, options) {\n    options = options || {};\n    super(objects, options);\n  }\n\n  getBounds() {\n    const coords = [];\n    coords.push(new Point(this.left - this.width / 2.0, this.top - this.height / 2.0));\n    coords.push(new Point(this.left + this.width / 2.0, this.top + this.height / 2.0));\n    return coords;\n  }\n}\n\nexport const group = (objects, options) => new Group(objects, options);\n\nexport default Group;\n","import Base from '../core/Base';\n\nexport class Layer extends Base {\n  constructor(options) {\n    super(options);\n    this.label = this.label !== undefined ? this.label : null;\n    this.draggable = this.draggable || false;\n    this.zIndex = this.zIndex || 1;\n    this.opacity = this.opacity || 1;\n    this.keepOnZoom = this.keepOnZoom || false;\n    this.clickable = this.clickable || false;\n\n    this.hoverCursor = this.hoverCursor || this.clickable ? 'pointer' : 'default';\n    this.moveCursor = this.moveCursor || 'move';\n\n    // this.class = this.class || this.constructor.name.toLowerCase();\n\n    this.style = {\n      zIndex: this.zIndex,\n      class: this.class,\n      parent: this,\n      keepOnZoom: this.keepOnZoom,\n      id: this.id,\n      hasControls: false,\n      hasBorders: false,\n      lockMovementX: !this.draggable,\n      lockMovementY: !this.draggable,\n      draggable: this.draggable,\n      clickable: this.clickable,\n      selectable: this.draggable,\n      hoverCursor: this.hoverCursor,\n      moveCursor: this.moveCursor\n    };\n  }\n\n  addTo(map) {\n    if (!map) {\n      if (this._map) {\n        this._map.removeLayer(this);\n      }\n      return;\n    }\n    this._map = map;\n    this._map.addLayer(this);\n  }\n}\n\nexport const layer = (options) => new Layer(options);\n\nexport default Layer;\n","import { Point } from '../geometry/Point';\nimport { Group } from '../layer/Group';\nimport { Layer } from '../layer/Layer';\n\nexport class Floor extends Layer {\n  constructor(options) {\n    super(options);\n\n    this.width = this.width || -1;\n    this.height = this.height || -1;\n\n    this.position = new Point(this.position);\n\n    this.class = 'floorplan';\n\n    this.load();\n  }\n\n  load() {\n    const vm = this;\n    const index = this.url.lastIndexOf('.');\n    const ext = this.url.substr(index + 1, 3);\n    console.log(ext);\n\n    if (ext === 'svg') {\n      fabric.loadSVGFromURL(\n        this.url,\n        (objects, options) => {\n          objects = objects.filter((e) => e.id !== 'grid');\n          const image = fabric.util.groupSVGElements(objects, options);\n          vm.setImage(image);\n        }\n      );\n    } else {\n      fabric.Image.fromURL(\n        this.url,\n        image => {\n          vm.setImage(image);\n        },\n        {\n          selectable: false,\n          opacity: this.opacity\n        }\n      );\n    }\n\n    this.handler = new fabric.Rect({\n      left: 0,\n      top: 0,\n      width: 20,\n      height: 20,\n      stroke: 'green',\n      fill: '',\n      hasControls: false,\n      hasBorders: false\n    });\n  }\n\n  setImage(image) {\n    if (this.shape && this.image) {\n      this.shape.remove(this.image);\n    }\n    const ratio = image.width / image.height;\n    if (this.width === -1 && this.height === -1) {\n      this.width = image.width;\n      this.height = image.height;\n    } else if (this.width === -1) {\n      this.width = this.height / ratio;\n    } else if (this.height === -1) {\n      this.height = this.width * ratio;\n    }\n    image.originalWidth = image.width;\n    image.originalHeight = image.height;\n    this.image = image.scaleToWidth(this.width);\n\n    this.scaleX = image.scaleX + 0;\n    this.scaleY = image.scaleY + 0;\n\n    this.drawShape();\n  }\n\n  drawShape() {\n    if (this.shape) {\n      this.shape.addWithUpdate(this.image);\n      this.emit('load', this);\n      return;\n    }\n\n    this.shape = new Group([this.image, this.handler], {\n      selectable: false,\n      draggable: false,\n      left: this.position.x,\n      top: this.position.y,\n      parent: this,\n      lockMovementX: true,\n      lockMovementY: true,\n      class: this.class,\n      zIndex: this.zIndex\n    });\n    this.emit('load', this);\n  }\n\n  setWidth(width) {\n    this.width = width;\n    this.onResize();\n  }\n\n  setHeight(height) {\n    this.height = height;\n    this.onResize();\n  }\n\n  setPosition(position) {\n    this.position = new Point(position);\n    if (!this.shape) return;\n    this.shape.set({\n      left: this.position.x,\n      top: this.position.y\n    });\n  }\n\n  setUrl(url) {\n    this.url = url;\n    this.load();\n  }\n\n  onResize(width, height) {\n    if (width !== undefined) {\n      this.width = width;\n    }\n    if (height !== undefined) {\n      this.height = height;\n    }\n\n    const ratio = this.image.width / this.image.height;\n    if (this.width === -1 && this.height === -1) {\n      this.width = this.image.width;\n      this.height = this.image.height;\n    } else if (this.width === -1) {\n      this.width = this.height / ratio;\n    } else if (this.height === -1) {\n      this.height = this.width * ratio;\n    }\n    this.image = this.image.scaleToWidth(this.width);\n    this.shape.addWithUpdate();\n  }\n}\n\nexport const floorplan = (options) => new Floor(options);\n","export class Line extends fabric.Line {\n  constructor(points, options) {\n    options = options || {};\n    options.strokeWidth = options.strokeWidth || 1;\n    options.class = 'line';\n    super(points, options);\n    this._strokeWidth = options.strokeWidth;\n  }\n\n  _renderStroke(ctx) {\n    this.strokeWidth = this._strokeWidth / this.canvas.getZoom();\n    super._renderStroke(ctx);\n  }\n}\n\nexport const line = (points, options) => new Line(points, options);\n\nexport default Line;\n","import { Layer } from './Layer';\nimport { Line } from './vector/Line';\n\nexport class Connector extends Layer {\n  constructor(start, end, options) {\n    options = options || {};\n    options.zIndex = options.zIndex || 9;\n    options.class = 'connector';\n    super(options);\n\n    if (!start || !end) {\n      console.error('start or end is missing');\n      return;\n    }\n    this.start = start;\n    this.end = end;\n    this.strokeWidth = this.strokeWidth || 1;\n\n    Object.assign(this.style, {\n      strokeWidth: this.strokeWidth,\n      stroke: this.color || 'grey',\n      fill: this.fill || false,\n      selectable: false\n    });\n\n    this.draw();\n\n    this.registerListeners();\n  }\n\n  registerListeners() {\n    const vm = this;\n    this.start.on('update:links', () => {\n      vm.shape.set({\n        x1: vm.start.position.x,\n        y1: vm.start.position.y\n      });\n    });\n\n    this.end.on('update:links', () => {\n      vm.shape.set({\n        x2: vm.end.position.x,\n        y2: vm.end.position.y\n      });\n    });\n  }\n\n  draw() {\n    this.shape = new Line([\n      this.start.position.x,\n      this.start.position.y,\n      this.end.position.x,\n      this.end.position.y\n    ], this.style);\n    // this.shape.setCoords();\n  }\n\n  redraw() {\n    this.shape.set({\n      x1: this.start.position.x,\n      y1: this.start.position.y,\n      x2: this.end.position.x,\n      y2: this.end.position.y\n    });\n  }\n\n  setStart(start) {\n    this.start = start;\n    this.redraw();\n  }\n\n  setEnd(end) {\n    this.end = end;\n    this.redraw();\n  }\n}\n\nexport const connector = (start, end, options) => new Connector(start, end, options);\n\nexport default Connector;\n","import { Layer } from '../Layer';\nimport { Group } from '../Group';\nimport { Point } from '../../geometry/Point';\nimport { Connector } from '../Connector';\n\nexport class Marker extends Layer {\n  constructor(position, options) {\n    options = options || {};\n    options.zIndex = options.zIndex || 10;\n    options.keepOnZoom = true;\n    options.position = new Point(position);\n    options.rotation = options.rotation || 0;\n    options.yaw = options.yaw || 0;\n    options.clickable = options.clickable || true;\n    options.class = 'marker';\n    super(options);\n\n    const vm = this;\n\n    this.text = this.text || '';\n    this.size = this.size || 10;\n    this.textColor = this.textColor || 'black';\n    this.fill = this.fill || 'white';\n    this.stroke = this.stroke || 'red';\n\n    Object.assign(this.style, {\n      left: this.position.x,\n      top: this.position.y,\n      // selectionBackgroundColor: false,\n      angle: this.rotation,\n      yaw: this.yaw\n    });\n\n    if (this.text) {\n      this.textObj = new fabric.Text(this.text, {\n        fontSize: this.size,\n        fill: this.textColor\n      });\n    }\n\n    if (this.icon) {\n      fabric.Image.fromURL(this.icon.url, image => {\n        vm.image = image.scaleToWidth(100);\n        this.init();\n        // vm.shape.removeWithUpdate();\n      }, {\n        selectable: true,\n        opacity: this.opacity\n      });\n    } else {\n      this.circle = new fabric.Circle({\n        radius: this.size,\n        strokeWidth: 2,\n        stroke: this.stroke,\n        fill: this.fill\n      });\n      this.init();\n    }\n  }\n\n  init() {\n    const objects = [];\n    if (this.image) {\n      objects.push(this.image);\n    }\n    if (this.circle) {\n      objects.push(this.circle);\n    }\n    if (this.textObj) {\n      objects.push(this.textObj);\n    }\n    this.shape = new Group(objects, this.style);\n    this.links = this.links || [];\n    this.addLinks();\n    this.registerListeners();\n\n    process.nextTick(() => {\n      this.emit('ready');\n    });\n  }\n\n  registerListeners() {\n    const vm = this;\n    this.shape.on('moving', () => {\n      vm.onShapeDrag();\n    });\n    this.shape.on('rotating', () => {\n      vm.emit('rotating');\n    });\n\n    this.shape.on('mousedown', (e) => {\n      vm.onShapeMouseDown(e);\n    });\n    this.shape.on('mousemove', (e) => {\n      vm.onShapeMouseMove(e);\n    });\n    this.shape.on('mouseup', (e) => {\n      vm.onShapeMouseUp(e);\n    });\n    this.shape.on('mouseover', () => {\n      vm.emit('mouseover', vm);\n    });\n    this.shape.on('mouseout', () => {\n      vm.emit('mouseout', vm);\n    });\n  }\n\n  setPosition(position) {\n    this.position = new Point(position);\n    if (!this.shape) return;\n\n    this.shape.set({\n      left: this.position.x,\n      top: this.position.y\n    });\n\n    this.emit('update:links');\n\n    if (this.shape.canvas) {\n      this.shape.canvas.renderAll();\n    }\n  }\n\n  setRotation(rotation) {\n    this.rotation = rotation;\n\n    if (!this.shape) return;\n\n    this.shape.set({\n      angle: this.rotation\n    });\n\n    if (this.shape.canvas) {\n      this.shape.canvas.renderAll();\n    }\n  }\n\n  setTextColor(color) {\n    if (this.text) {\n      this.text.setColor(color);\n    }\n  }\n\n  setStroke(color) {\n    if (this.circle) {\n      this.circle.set('stroke', color);\n    }\n  }\n\n  setColor(color) {\n    if (this.circle) {\n      this.circle.setColor(color);\n    }\n  }\n\n  setLinks(links) {\n    this.links = links;\n    this.addLinks();\n  }\n\n  addLinks() {\n    this.connectors = [];\n    this.links.forEach(link => {\n      const connector = new Connector(this, link);\n      this.connectors.push(connector);\n    });\n\n    this.addConnectors();\n  }\n\n  addConnectors() {\n    const vm = this;\n    this.connectors.forEach(connector => {\n      vm._map.addLayer(connector);\n    });\n  }\n\n  onAdded() {\n    this.addConnectors();\n  }\n\n  onShapeDrag() {\n    const matrix = this.shape.calcTransformMatrix();\n    const [,,,, x, y] = matrix;\n    this.position = new Point(x, y);\n    this.emit('update:links');\n    this.emit('moving');\n  }\n\n  onShapeMouseDown(e) {\n    console.log(e);\n    this.dragStart = e;\n  }\n\n  onShapeMouseMove() {\n    if (this.dragStart) {\n      this.emit('dragstart');\n      this.dragging = true;\n      this.dragStart = null;\n    }\n\n    if (this.dragging) {\n      this.emit('drag');\n    } else {\n      this.emit('hover');\n    }\n  }\n\n  onShapeMouseUp() {\n    if (!this.dragging) {\n      this.emit('click');\n    } else {\n      this.emit('moved');\n    }\n    this.dragStart = null;\n    this.dragging = false;\n  }\n}\n\nexport const marker = (position, options) => new Marker(position, options);\n","import { ICON } from '../../core/Constants';\n\nexport class Icon extends fabric.Image {\n  constructor(options) {\n    super(options);\n    this.defaults = Object.assign({}, ICON);\n    Object.assign({}, this.defaults);\n    Object.assign({}, this._options);\n  }\n}\nexport const icon = (options) => new Icon(options);\n","import { Layer } from '../Layer';\nimport { Point } from '../../geometry/Point';\nimport { Group } from '../Group';\n\nexport class Polyline extends Layer {\n  constructor(_points, options) {\n    options = options || {};\n    options.points = _points || [];\n    super(options);\n    this.lines = [];\n    this.class = 'polyline';\n    this.strokeWidth = 1;\n\n    this.lineOptions = {\n      strokeWidth: this.strokeWidth,\n      stroke: this.color || 'grey',\n      fill: this.fill || false\n    };\n\n    this.shape = new Group([], {\n      selectable: false,\n      hasControls: false,\n      class: this.class,\n      parent: this\n    });\n\n    this.setPoints(this._points);\n  }\n\n  addPoint(point) {\n    this.points.push(new Point(point));\n\n    if (this.points.length > 1) {\n      const i = this.points.length - 1;\n      const j = this.points.length - 2;\n      const p1 = this.points[i];\n      const p2 = this.points[j];\n      const line = new fabric.Line(p1.getArray().concat(p2.getArray()), this.lineOptions);\n      this.lines.push(line);\n      this.shape.addWithUpdate(line);\n    }\n  }\n\n  setStrokeWidth(strokeWidth) {\n    this.lines.forEach(line => {\n      line.setStrokeWidth(strokeWidth);\n    });\n  }\n\n  setPoints(points = []) {\n    this.removeLines();\n    this.points = [];\n    for (let i = 0; i < points.length; i += 1) {\n      const point = new Point(points[i]);\n      this.points.push(point);\n      this.addPoint();\n    }\n  }\n\n  removeLines() {\n    for (let i = 0; i < this.lines.length; i += 1) {\n      this.shape.remove(this.lines[i]);\n    }\n    this.lines = [];\n  }\n}\n\nexport const polyline = (points, options) => new Polyline(points, options);\n","export class Circle extends fabric.Circle {\n  constructor(options) {\n    super(options);\n    console.log('circle');\n  }\n}\n\nexport const circle = (options) => new Circle(options);\n","export class Rect extends fabric.Rect {\n  constructor(points, options) {\n    options = options || {};\n    options.strokeWidth = options.strokeWidth || 1;\n    options.class = 'rect';\n    super(points, options);\n    this._strokeWidth = options.strokeWidth;\n  }\n\n  _renderStroke(ctx) {\n    this.strokeWidth = this._strokeWidth / this.canvas.getZoom();\n    super._renderStroke(ctx);\n  }\n}\n\nexport const rect = (points, options) => new Rect(points, options);\n\nexport default Rect;\n","import { Rect } from '../vector';\nimport { Layer } from '../Layer';\n\nexport class Bbox extends Layer {\n  constructor(bounds, options) {\n    options = options || {};\n    options.bounds = bounds;\n    options.class = 'bbox';\n    super(options);\n    if (!this.bounds) {\n      console.error('bounds is missing!');\n      return;\n    }\n    this.style = {\n      strokeWidth: 1,\n      stroke: this.color || 'black',\n      fill: this.fill || '#88888822',\n      class: this.class,\n      parent: this\n    };\n    this.draw();\n  }\n\n  setBounds(bounds) {\n    this.bounds = bounds;\n    this.draw();\n  }\n\n  draw() {\n    this.coords = {\n      left: this.bounds[0][0],\n      top: this.bounds[0][1],\n      width: this.bounds[1][0] - this.bounds[0][0],\n      height: this.bounds[1][1] - this.bounds[0][1]\n    };\n\n    if (this.shape) {\n      this.shape.set(this.coords);\n    } else {\n      Object.assign(this.style, this.coords);\n      this.shape = new Rect(this.style);\n    }\n  }\n}\nexport const bbox = (bounds, options) => new Bbox(bounds, options);\nexport default Bbox;\n","import fabric from 'fabric';\n\nimport { version } from '../package.json';\n\nconsole.log('fabricJS ', fabric.version || window.fabric.version);\nconsole.log('IndoorJS ', version);\n\nexport { version };\n\n// constants\nexport * from './core/index';\n\n// geometry\nexport * from './geometry/index';\n\n// map\nexport * from './map/index';\n\n// floorplan\nexport * from './floorplan/index';\n\n// layer\nexport * from './layer/index';\n"],"names":["Point","x","y","params","length","Object","prototype","hasOwnProperty","call","console","error","fabric","point","Modes","SELECT","GRAB","DRAW","MAP","center","zoom","minZoom","maxZoom","gridEnabled","zoomEnabled","selectEnabled","mode","MARKER","position","ICON","url","size","anchor","originX","originY","lockUniScaling","lockScalingFlip","transparentCorners","centeredScaling","cornerStyle","cornerColor","borderColor","borderOpacity","cornerOpacity","cornerStrokeColor","objectCaching","Group","selectionBackgroundColor","borderDashArray","padding","getBounds","coords","push","left","width","top","height","global","isNum","val","isNaN","ev","toElement","currentTarget","toElementBoundingRect","getBoundingClientRect","orgEv","originalEvent","hasTouches","touches","pageX","pageY","clientX","clientY","currentPoint","stopThresholdDefault","bounceDeceleration","bounceAcceleration","window","addEventListener","Impetus","source","sourceEl","document","updateCallback","update","multiplier","friction","initialValues","boundX","boundY","bounce","boundXmin","boundXmax","boundYmin","boundYmax","pointerLastX","pointerLastY","pointerCurrentX","pointerCurrentY","pointerId","decVelX","decVelY","targetX","targetY","stopThreshold","ticking","pointerActive","paused","decelerating","trackingPoints","init","querySelector","Error","callUpdateCallback","onDown","destroy","removeEventListener","cleanUpRuntimeEvents","pause","resume","setValues","setMultiplier","setBoundX","setBoundY","onMove","getPassiveSupported","passive","onUp","stopTracking","addRuntimeEvents","normalizeEvent","type","touch","targetTouches","changedTouches","id","identifier","event","addTrackingPoint","preventDefault","requestTick","startDecelAnim","time","Date","now","shift","updateAndRender","pointerChangeX","pointerChangeY","diff","checkBounds","dragOutOfBoundsMultiplier","Math","pow","requestAnimFrame","restrict","xDiff","yDiff","undefined","inBounds","firstPoint","lastPoint","xOffset","yOffset","timeOffset","D","abs","stepDecelAnim","reboundAdjust","adjust","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","setTimeout","passiveSupported","options","defineProperty","get","err","str","out","String","num","parseFloat","match","PIXELS_PER_INCH","defaults","toPX","parts","parseUnit","px","mouseWheelListen","element","noScroll","lineHeight","listener","dx","deltaX","dy","deltaY","dz","deltaZ","deltaMode","scale","innerHeight","rootPosition","mouseEventOffset","target","srcElement","Array","isArray","cx","cy","rect","getBoundingClientOffset","body","distance","a","b","sqrt","touchPinch","emitter","EventEmitter2","fingers","activeCount","lastDistance","ended","enabled","defineProperties","pinching","enable","disable","indexOfTouch","i","onTouchStart","onTouchMove","onTouchRemoved","newTouch","idx","first","newIndex","oldIndex","newFinger","Finger","eventOffset","oldTouch","emit","initialDistance","computeDistance","changed","movedTouch","currentDistance","removed","otherIdx","otherTouch","getPrefixed","name","lastTime","timeoutDefer","fn","timeToCall","max","bind","obj","slice","apply","arguments","args","concat","requestFn","cancelFn","cancelAnimationFrame","clearTimeout","raf","context","immediate","cancel","panzoom","cb","Function","documentElement","cursor","hasPassive","supported","opts","e","impetus","initX","initY","initFn","evPos","lastY","lastX","x0","y0","schedule","wheelListener","wheel","pinch","mult","initialCoords","on","curr","f1","f2","prev","planned","frameId","arg","unpanzoom","clamp","min","len","almostEqual","absoluteError","relativeError","d","DBL_EPSILON","FLT_EPSILON","range","start","stop","step","toReturn","increasing","log10","log","isMultiple","eps","remainder","almost","minStep","srcSteps","power","floor","lg","order","steps","map","v","value","toString","getPrototypeOf","Base","_options","assign","alpha","color","replace","split","join","gridStyle","unit","lines","state","coord","coordinate","offset","ceil","lineColor","light","heavy","tenStep","nextStep","colors","ticks","tickWidth","axisWidth","labels","orientation","Number","toFixed","format","Axis","values","t","getRatio","getRange","Grid","canvas","getContext","setDefaults","draw","shape","pt","pr","pb","pl","axisCoords","opposite","getCoords","axisOrigin","setWidth","setHeight","calcCoordinate","axisX","axisY","grid","MAX_VALUE","axisColor","lineWidth","tickAlign","labelColor","fill","fontSize","units","toPx","fontFamily","lineColors","tick","isObj","keys","forEach","label","pixelRatio","devicePixelRatio","autostart","interactions","Infinity","origin","panEnabled","style","axis","clearRect","drawLines","ctx","axisRatio","j","strokeStyle","beginPath","x1","y1","x2","y2","moveTo","lineTo","stroke","closePath","normals","xDif","yDif","dist","tickCoords","labelCoords","k","drawLabels","font","fillStyle","textBaseline","textHeight","indent","textOffset","isOpp","disabled","textWidth","measureText","textLeft","textTop","fillText","ModesMixin","superclass","isDrawingMode","interactive","selection","hoverCursor","moveCursor","setCursor","discardActiveObject","setMode","mix","MixinBuilder","mixins","reduce","c","m","Map","container","createElement","appendChild","setAttribute","clientWidth","clientHeight","Canvas","preserveObjectStacking","clear","absolutePan","addFloorPlan","addGrid","vm","registerListeners","floorplan","img","addLayer","layer","add","_objects","sort","o1","o2","zIndex","keepOnZoom","_set","remove","gridCanvas","cloneCanvas","index","clone","wrapperEl","process","minX","maxX","minY","maxY","forEachObject","onResize","bounds","boundWidth","boundHeight","scaleX","scaleY","setZoom","oldWidth","oldHeight","setSize","relativePan","update2","render","zoomToPoint","isGrabMode","objects","getObjects","object","prevZoom","curZoom","oX","oY","tx","ty","setX","setY","parent","group","removeWithUpdate","orgYaw","yaw","fire","renderAll","angle","deselected","inGroup","selected","dragObject","clickable","dragging","modeToggleByKey","setModeAsSelect","ctrlKey","metaKey","isSelectMode","setModeAsGrab","off","list","Layer","draggable","opacity","hasControls","hasBorders","lockMovementX","lockMovementY","selectable","_map","removeLayer","Floor","load","lastIndexOf","ext","substr","loadSVGFromURL","filter","image","util","groupSVGElements","setImage","Image","fromURL","handler","Rect","ratio","originalWidth","originalHeight","scaleToWidth","drawShape","addWithUpdate","set","Line","points","strokeWidth","_strokeWidth","getZoom","line","Connector","end","redraw","connector","Marker","rotation","text","textColor","textObj","Text","icon","circle","Circle","radius","links","addLinks","onShapeDrag","onShapeMouseDown","onShapeMouseMove","onShapeMouseUp","setColor","connectors","link","addConnectors","matrix","calcTransformMatrix","dragStart","marker","Icon","Polyline","_points","lineOptions","setPoints","p1","p2","getArray","setStrokeWidth","removeLines","addPoint","polyline","Bbox","bbox","version"],"mappings":"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"}